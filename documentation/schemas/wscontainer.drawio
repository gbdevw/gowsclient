<mxfile host="app.diagrams.net" modified="2023-09-14T14:18:37.279Z" agent="Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/116.0.0.0 Safari/537.36" etag="4dDSkbN9WtwOXTBBa_jE" version="21.7.2" type="device" pages="7">
  <diagram id="wDMHGDvBnOSqZAVSQ0D1" name="contexts">
    <mxGraphModel dx="3088" dy="750" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="c6pu-HpNd8BmG1Tqz_h7-1" value="&lt;span style=&quot;font-size: 18px;&quot;&gt;&lt;b&gt;Websocket container: contexts hierarchy&lt;/b&gt;&lt;/span&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="-890" y="355" width="380" height="40" as="geometry" />
        </mxCell>
        <mxCell id="c6pu-HpNd8BmG1Tqz_h7-6" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="c6pu-HpNd8BmG1Tqz_h7-3" target="c6pu-HpNd8BmG1Tqz_h7-10" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="-400" y="460" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="c6pu-HpNd8BmG1Tqz_h7-3" value="Context&lt;br&gt;&lt;b&gt;Root&lt;/b&gt;" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-490" y="380" width="180" height="60" as="geometry" />
        </mxCell>
        <mxCell id="c6pu-HpNd8BmG1Tqz_h7-7" value="Root context is provided when calling Start() method." style="rounded=0;whiteSpace=wrap;html=1;align=left;fillColor=#f5f5f5;fontColor=#333333;strokeColor=#666666;" parent="1" vertex="1">
          <mxGeometry x="-250" y="393.75" width="320" height="32.5" as="geometry" />
        </mxCell>
        <mxCell id="c6pu-HpNd8BmG1Tqz_h7-8" value="" style="endArrow=none;dashed=1;html=1;dashPattern=1 3;strokeWidth=2;rounded=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="c6pu-HpNd8BmG1Tqz_h7-3" target="c6pu-HpNd8BmG1Tqz_h7-7" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="-40" y="570" as="sourcePoint" />
            <mxPoint x="10" y="520" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="GeOLnXt3Be6THTe9zfvP-4" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="c6pu-HpNd8BmG1Tqz_h7-10" target="c6pu-HpNd8BmG1Tqz_h7-11" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="-400" y="570" />
              <mxPoint x="-540" y="570" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="GeOLnXt3Be6THTe9zfvP-5" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="c6pu-HpNd8BmG1Tqz_h7-10" target="GeOLnXt3Be6THTe9zfvP-1" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="-400" y="570" />
              <mxPoint x="40" y="570" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="jLx2ojcbO6YEjEwQErst-3" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="c6pu-HpNd8BmG1Tqz_h7-10" target="jLx2ojcbO6YEjEwQErst-1" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="-400" y="570" />
              <mxPoint x="-300" y="570" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="Pkctly4QoqMKxB25V648-2" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="c6pu-HpNd8BmG1Tqz_h7-10" target="Pkctly4QoqMKxB25V648-1" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="-400" y="570" />
              <mxPoint x="-780" y="570" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="c6pu-HpNd8BmG1Tqz_h7-10" value="Context&lt;br&gt;&lt;b&gt;Websocket engine&lt;/b&gt;" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-490" y="480" width="180" height="60" as="geometry" />
        </mxCell>
        <mxCell id="GeOLnXt3Be6THTe9zfvP-7" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="c6pu-HpNd8BmG1Tqz_h7-11" target="GeOLnXt3Be6THTe9zfvP-6" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="c6pu-HpNd8BmG1Tqz_h7-11" value="Context&lt;br&gt;&lt;b&gt;Websocket engine start&lt;/b&gt;" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-630" y="600" width="180" height="60" as="geometry" />
        </mxCell>
        <mxCell id="GeOLnXt3Be6THTe9zfvP-9" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="GeOLnXt3Be6THTe9zfvP-1" target="GeOLnXt3Be6THTe9zfvP-8" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="o6v2z17pETwmS342_QKo-1" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" parent="1" source="GeOLnXt3Be6THTe9zfvP-1" target="GeOLnXt3Be6THTe9zfvP-10" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="GeOLnXt3Be6THTe9zfvP-1" value="Context&lt;br&gt;&lt;b&gt;Websocket engine session&lt;/b&gt;" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-50" y="600" width="180" height="60" as="geometry" />
        </mxCell>
        <mxCell id="GeOLnXt3Be6THTe9zfvP-6" value="Context&lt;br&gt;&lt;b&gt;OnOpen&lt;/b&gt;" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-680" y="840" width="180" height="60" as="geometry" />
        </mxCell>
        <mxCell id="GeOLnXt3Be6THTe9zfvP-8" value="Context&lt;br&gt;&lt;b&gt;OnMessage&lt;/b&gt;" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-160" y="720" width="180" height="60" as="geometry" />
        </mxCell>
        <mxCell id="GeOLnXt3Be6THTe9zfvP-10" value="Context&lt;br&gt;&lt;b&gt;OnReadError&lt;/b&gt;" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="63" y="720" width="180" height="60" as="geometry" />
        </mxCell>
        <mxCell id="DGiA3exoL9YWDcKOnJYQ-1" value="Context&lt;br&gt;&lt;b&gt;OnClose&lt;/b&gt;" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-390" y="720" width="180" height="60" as="geometry" />
        </mxCell>
        <mxCell id="50YSNw_-9bxdEuJLkx3k-3" value="" style="endArrow=none;dashed=1;html=1;dashPattern=1 3;strokeWidth=2;rounded=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="c6pu-HpNd8BmG1Tqz_h7-10" target="50YSNw_-9bxdEuJLkx3k-4" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="-40" y="670" as="sourcePoint" />
            <mxPoint x="10" y="620" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="50YSNw_-9bxdEuJLkx3k-4" value="Bound to websocket container lifecycle" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#f5f5f5;fontColor=#333333;strokeColor=#666666;" parent="1" vertex="1">
          <mxGeometry x="-250" y="495" width="230" height="30" as="geometry" />
        </mxCell>
        <mxCell id="50YSNw_-9bxdEuJLkx3k-5" value="Bound to websocket connection lifecycle" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#f5f5f5;fontColor=#333333;strokeColor=#666666;" parent="1" vertex="1">
          <mxGeometry x="180" y="615" width="240" height="30" as="geometry" />
        </mxCell>
        <mxCell id="50YSNw_-9bxdEuJLkx3k-6" value="" style="endArrow=none;dashed=1;html=1;dashPattern=1 3;strokeWidth=2;rounded=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="GeOLnXt3Be6THTe9zfvP-1" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="203" y="670" as="sourcePoint" />
            <mxPoint x="123" y="630" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="50YSNw_-9bxdEuJLkx3k-7" value="One per received message" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#f5f5f5;fontColor=#333333;strokeColor=#666666;" parent="1" vertex="1">
          <mxGeometry x="-151.5" y="830" width="163" height="30" as="geometry" />
        </mxCell>
        <mxCell id="50YSNw_-9bxdEuJLkx3k-8" value="" style="endArrow=none;dashed=1;html=1;dashPattern=1 3;strokeWidth=2;rounded=0;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;" parent="1" source="50YSNw_-9bxdEuJLkx3k-7" target="GeOLnXt3Be6THTe9zfvP-8" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="203" y="670" as="sourcePoint" />
            <mxPoint x="253" y="620" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="50YSNw_-9bxdEuJLkx3k-9" value="One per error on read" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#f5f5f5;fontColor=#333333;strokeColor=#666666;" parent="1" vertex="1">
          <mxGeometry x="71.5" y="830" width="163" height="30" as="geometry" />
        </mxCell>
        <mxCell id="50YSNw_-9bxdEuJLkx3k-10" value="" style="endArrow=none;dashed=1;html=1;dashPattern=1 3;strokeWidth=2;rounded=0;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;" parent="1" source="50YSNw_-9bxdEuJLkx3k-9" target="GeOLnXt3Be6THTe9zfvP-10" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="203" y="670" as="sourcePoint" />
            <mxPoint x="253" y="620" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="50YSNw_-9bxdEuJLkx3k-11" value="Each time connection is closed" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#f5f5f5;fontColor=#333333;strokeColor=#666666;" parent="1" vertex="1">
          <mxGeometry x="-395" y="830" width="190" height="30" as="geometry" />
        </mxCell>
        <mxCell id="50YSNw_-9bxdEuJLkx3k-13" value="One each time engine opens a connection" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#f5f5f5;fontColor=#333333;strokeColor=#666666;" parent="1" vertex="1">
          <mxGeometry x="-875" y="790" width="240" height="30" as="geometry" />
        </mxCell>
        <mxCell id="50YSNw_-9bxdEuJLkx3k-14" value="" style="endArrow=none;dashed=1;html=1;dashPattern=1 3;strokeWidth=2;rounded=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0.25;entryY=1;entryDx=0;entryDy=0;" parent="1" source="50YSNw_-9bxdEuJLkx3k-13" target="c6pu-HpNd8BmG1Tqz_h7-11" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="-470" y="790" as="sourcePoint" />
            <mxPoint x="-720" y="780" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="50YSNw_-9bxdEuJLkx3k-16" value="" style="endArrow=none;dashed=1;html=1;dashPattern=1 3;strokeWidth=2;rounded=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="50YSNw_-9bxdEuJLkx3k-13" target="GeOLnXt3Be6THTe9zfvP-6" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="-470" y="790" as="sourcePoint" />
            <mxPoint x="-420" y="740" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="jLx2ojcbO6YEjEwQErst-2" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="jLx2ojcbO6YEjEwQErst-1" target="DGiA3exoL9YWDcKOnJYQ-1" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="jLx2ojcbO6YEjEwQErst-1" value="Context&lt;br&gt;&lt;b&gt;Websocket engine shutdown&lt;/b&gt;" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-390" y="600" width="180" height="60" as="geometry" />
        </mxCell>
        <mxCell id="jLx2ojcbO6YEjEwQErst-4" value="" style="endArrow=none;dashed=1;html=1;dashPattern=1 3;strokeWidth=2;rounded=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" parent="1" source="GeOLnXt3Be6THTe9zfvP-1" target="50YSNw_-9bxdEuJLkx3k-5" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="20" y="710" as="sourcePoint" />
            <mxPoint x="70" y="660" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="jLx2ojcbO6YEjEwQErst-5" value="" style="endArrow=none;dashed=1;html=1;dashPattern=1 3;strokeWidth=2;rounded=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="DGiA3exoL9YWDcKOnJYQ-1" target="50YSNw_-9bxdEuJLkx3k-11" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="-150" y="660" as="sourcePoint" />
            <mxPoint x="70" y="660" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="jLx2ojcbO6YEjEwQErst-6" value="" style="endArrow=none;dashed=1;html=1;dashPattern=1 3;strokeWidth=2;rounded=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;exitX=0;exitY=0.5;exitDx=0;exitDy=0;" parent="1" source="50YSNw_-9bxdEuJLkx3k-11" target="jLx2ojcbO6YEjEwQErst-1" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="-280" y="710" as="sourcePoint" />
            <mxPoint x="-230" y="660" as="targetPoint" />
            <Array as="points">
              <mxPoint x="-420" y="845" />
              <mxPoint x="-420" y="630" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="Pkctly4QoqMKxB25V648-3" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="Pkctly4QoqMKxB25V648-1" target="c6pu-HpNd8BmG1Tqz_h7-11" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Pkctly4QoqMKxB25V648-1" value="Context&lt;br&gt;&lt;b&gt;Websocket engine restart&lt;/b&gt;" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-870" y="600" width="180" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Pkctly4QoqMKxB25V648-4" value="One each time engine restarts" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#f5f5f5;fontColor=#333333;strokeColor=#666666;" parent="1" vertex="1">
          <mxGeometry x="-875" y="710" width="190" height="30" as="geometry" />
        </mxCell>
        <mxCell id="Pkctly4QoqMKxB25V648-7" value="" style="endArrow=none;dashed=1;html=1;dashPattern=1 3;strokeWidth=2;rounded=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="Pkctly4QoqMKxB25V648-1" target="Pkctly4QoqMKxB25V648-4" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="-640" y="710" as="sourcePoint" />
            <mxPoint x="-590" y="660" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="imeC73_U1OM5D7ctx9Nd-1" value="Context&lt;br&gt;&lt;b&gt;Stop&lt;/b&gt;" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-730" y="480" width="180" height="60" as="geometry" />
        </mxCell>
        <mxCell id="imeC73_U1OM5D7ctx9Nd-2" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;dashed=1;dashPattern=12 12;" parent="1" source="c6pu-HpNd8BmG1Tqz_h7-3" target="imeC73_U1OM5D7ctx9Nd-1" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="-400" y="710" as="sourcePoint" />
            <mxPoint x="-350" y="660" as="targetPoint" />
            <Array as="points">
              <mxPoint x="-400" y="460" />
              <mxPoint x="-640" y="460" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="imeC73_U1OM5D7ctx9Nd-3" value="Context used by Stop method does not have to derive from rooot context" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#f5f5f5;fontColor=#333333;strokeColor=#666666;align=left;" parent="1" vertex="1">
          <mxGeometry x="-950" y="487.5" width="180" height="45" as="geometry" />
        </mxCell>
        <mxCell id="imeC73_U1OM5D7ctx9Nd-4" value="" style="endArrow=none;dashed=1;html=1;dashPattern=1 3;strokeWidth=2;rounded=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="imeC73_U1OM5D7ctx9Nd-3" target="imeC73_U1OM5D7ctx9Nd-1" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="-400" y="710" as="sourcePoint" />
            <mxPoint x="-350" y="660" as="targetPoint" />
          </mxGeometry>
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
  <diagram id="3cC_zuXhXGdCR_b8_7aD" name="Start">
    <mxGraphModel dx="1434" dy="750" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="lugdHr5Z2LZSpCu2G0fi-1" value="" style="ellipse;html=1;shape=startState;fillColor=#000000;strokeColor=#ff0000;" parent="1" vertex="1">
          <mxGeometry x="370" y="170" width="30" height="30" as="geometry" />
        </mxCell>
        <mxCell id="lugdHr5Z2LZSpCu2G0fi-2" value="" style="edgeStyle=orthogonalEdgeStyle;html=1;verticalAlign=bottom;endArrow=open;endSize=8;strokeColor=#ff0000;rounded=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="lugdHr5Z2LZSpCu2G0fi-1" target="dbodp6VFbfzhMpodNWT--11" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="385" y="260" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="lugdHr5Z2LZSpCu2G0fi-3" value="Start a goroutine which calls&lt;br&gt;startEngine (background)" style="rounded=1;whiteSpace=wrap;html=1;arcSize=40;fillColor=#d5e8d4;strokeColor=#82b366;" parent="1" vertex="1">
          <mxGeometry x="275" y="560" width="220" height="40" as="geometry" />
        </mxCell>
        <mxCell id="lugdHr5Z2LZSpCu2G0fi-4" value="" style="edgeStyle=orthogonalEdgeStyle;html=1;verticalAlign=bottom;endArrow=open;endSize=8;strokeColor=#ff0000;rounded=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="lugdHr5Z2LZSpCu2G0fi-3" target="FxEQDPhvqp9S6eHfguba-1" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="340" y="660" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="lugdHr5Z2LZSpCu2G0fi-5" value="" style="ellipse;html=1;shape=endState;fillColor=#000000;strokeColor=#ff0000;" parent="1" vertex="1">
          <mxGeometry x="840" y="895" width="30" height="30" as="geometry" />
        </mxCell>
        <mxCell id="k6KIU8XzVPcbvyUl0PWK-1" value="&lt;span style=&quot;font-size: 18px;&quot;&gt;&lt;b&gt;Start(ctx context.Context): Start the engine&lt;/b&gt;&lt;/span&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="414" y="165" width="390" height="40" as="geometry" />
        </mxCell>
        <mxCell id="dbodp6VFbfzhMpodNWT--2" value="Check engine context" style="rounded=1;whiteSpace=wrap;html=1;arcSize=40;fillColor=#d5e8d4;strokeColor=#82b366;" parent="1" vertex="1">
          <mxGeometry x="275" y="320" width="220" height="40" as="geometry" />
        </mxCell>
        <mxCell id="dbodp6VFbfzhMpodNWT--3" value="" style="edgeStyle=orthogonalEdgeStyle;html=1;verticalAlign=bottom;endArrow=open;endSize=8;strokeColor=#ff0000;rounded=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="dbodp6VFbfzhMpodNWT--2" target="dbodp6VFbfzhMpodNWT--4" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="414" y="580" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="dbodp6VFbfzhMpodNWT--4" value="Done?" style="rhombus;whiteSpace=wrap;html=1;fontColor=#333333;fillColor=#f5f5f5;strokeColor=#666666;" parent="1" vertex="1">
          <mxGeometry x="345" y="400" width="80" height="40" as="geometry" />
        </mxCell>
        <mxCell id="dbodp6VFbfzhMpodNWT--5" value="no" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;verticalAlign=bottom;endArrow=open;endSize=8;strokeColor=#ff0000;rounded=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" parent="1" source="dbodp6VFbfzhMpodNWT--4" target="dbodp6VFbfzhMpodNWT--9" edge="1">
          <mxGeometry y="-25" relative="1" as="geometry">
            <mxPoint x="240" y="750" as="targetPoint" />
            <mxPoint x="-120" y="540" as="sourcePoint" />
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="dbodp6VFbfzhMpodNWT--6" value="yes" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;verticalAlign=top;endArrow=open;endSize=8;strokeColor=#ff0000;rounded=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="dbodp6VFbfzhMpodNWT--4" target="dbodp6VFbfzhMpodNWT--7" edge="1">
          <mxGeometry x="-0.8182" y="30" relative="1" as="geometry">
            <mxPoint x="170" y="610" as="targetPoint" />
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="dbodp6VFbfzhMpodNWT--7" value="Return error" style="rounded=1;whiteSpace=wrap;html=1;arcSize=40;fillColor=#f8cecc;strokeColor=#b85450;" parent="1" vertex="1">
          <mxGeometry x="480" y="400" width="120" height="40" as="geometry" />
        </mxCell>
        <mxCell id="dbodp6VFbfzhMpodNWT--8" value="" style="edgeStyle=orthogonalEdgeStyle;html=1;verticalAlign=bottom;endArrow=open;endSize=8;strokeColor=#ff0000;rounded=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="dbodp6VFbfzhMpodNWT--7" target="dbodp6VFbfzhMpodNWT--13" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="460" y="740" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="dbodp6VFbfzhMpodNWT--9" value="Create startup channel which will receive nil or an error from background startup" style="rounded=1;whiteSpace=wrap;html=1;arcSize=40;fillColor=#d5e8d4;strokeColor=#82b366;" parent="1" vertex="1">
          <mxGeometry x="275" y="480" width="220" height="40" as="geometry" />
        </mxCell>
        <mxCell id="dbodp6VFbfzhMpodNWT--10" value="" style="edgeStyle=orthogonalEdgeStyle;html=1;verticalAlign=bottom;endArrow=open;endSize=8;strokeColor=#ff0000;rounded=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="dbodp6VFbfzhMpodNWT--9" target="lugdHr5Z2LZSpCu2G0fi-3" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="-50" y="590" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="dbodp6VFbfzhMpodNWT--11" value="Create a cancellable engine context and an exit function from provided context" style="rounded=1;whiteSpace=wrap;html=1;arcSize=40;fillColor=#d5e8d4;strokeColor=#82b366;" parent="1" vertex="1">
          <mxGeometry x="275" y="240" width="220" height="40" as="geometry" />
        </mxCell>
        <mxCell id="dbodp6VFbfzhMpodNWT--12" value="" style="edgeStyle=orthogonalEdgeStyle;html=1;verticalAlign=bottom;endArrow=open;endSize=8;strokeColor=#ff0000;rounded=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="dbodp6VFbfzhMpodNWT--11" target="dbodp6VFbfzhMpodNWT--2" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="120" y="230" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="dbodp6VFbfzhMpodNWT--13" value="" style="ellipse;html=1;shape=endState;fillColor=#000000;strokeColor=#ff0000;" parent="1" vertex="1">
          <mxGeometry x="660" y="405" width="30" height="30" as="geometry" />
        </mxCell>
        <mxCell id="O9f6-C6ALdU0ipOdZWHA-1" value="Wait on channels: startup, ctx.Done" style="rounded=1;whiteSpace=wrap;html=1;arcSize=40;fillColor=#fff2cc;strokeColor=#d6b656;" parent="1" vertex="1">
          <mxGeometry x="280" y="720" width="210" height="40" as="geometry" />
        </mxCell>
        <mxCell id="O9f6-C6ALdU0ipOdZWHA-2" value="" style="edgeStyle=orthogonalEdgeStyle;html=1;verticalAlign=bottom;endArrow=open;endSize=8;strokeColor=#ff0000;rounded=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="O9f6-C6ALdU0ipOdZWHA-1" target="aFF8EAabXUJYXRpht4ci-1" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="520" y="860" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="aFF8EAabXUJYXRpht4ci-1" value="Started?" style="rhombus;whiteSpace=wrap;html=1;fontColor=#333333;fillColor=#f5f5f5;strokeColor=#666666;" parent="1" vertex="1">
          <mxGeometry x="415" y="890" width="80" height="40" as="geometry" />
        </mxCell>
        <mxCell id="aFF8EAabXUJYXRpht4ci-2" value="" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;verticalAlign=bottom;endArrow=open;endSize=8;strokeColor=#ff0000;rounded=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="aFF8EAabXUJYXRpht4ci-1" target="aFF8EAabXUJYXRpht4ci-11" edge="1">
          <mxGeometry x="-1" relative="1" as="geometry">
            <mxPoint x="260" y="810" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="aFF8EAabXUJYXRpht4ci-4" value="Done?" style="rhombus;whiteSpace=wrap;html=1;fontColor=#333333;fillColor=#f5f5f5;strokeColor=#666666;" parent="1" vertex="1">
          <mxGeometry x="415" y="810" width="80" height="40" as="geometry" />
        </mxCell>
        <mxCell id="aFF8EAabXUJYXRpht4ci-6" value="" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;verticalAlign=top;endArrow=open;endSize=8;strokeColor=#ff0000;rounded=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="aFF8EAabXUJYXRpht4ci-4" target="aFF8EAabXUJYXRpht4ci-9" edge="1">
          <mxGeometry x="-1" relative="1" as="geometry">
            <mxPoint x="625" y="940" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="aFF8EAabXUJYXRpht4ci-7" value="" style="edgeStyle=orthogonalEdgeStyle;html=1;verticalAlign=bottom;endArrow=open;endSize=8;strokeColor=#ff0000;rounded=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="O9f6-C6ALdU0ipOdZWHA-1" target="aFF8EAabXUJYXRpht4ci-4" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="530" y="870" as="targetPoint" />
            <mxPoint x="500" y="760" as="sourcePoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="aFF8EAabXUJYXRpht4ci-8" value="" style="ellipse;html=1;shape=endState;fillColor=#000000;strokeColor=#ff0000;" parent="1" vertex="1">
          <mxGeometry x="720" y="815" width="30" height="30" as="geometry" />
        </mxCell>
        <mxCell id="aFF8EAabXUJYXRpht4ci-9" value="Return error" style="rounded=1;whiteSpace=wrap;html=1;arcSize=40;fillColor=#f8cecc;strokeColor=#b85450;" parent="1" vertex="1">
          <mxGeometry x="550" y="810" width="120" height="40" as="geometry" />
        </mxCell>
        <mxCell id="aFF8EAabXUJYXRpht4ci-10" value="" style="edgeStyle=orthogonalEdgeStyle;html=1;verticalAlign=bottom;endArrow=open;endSize=8;strokeColor=#ff0000;rounded=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="aFF8EAabXUJYXRpht4ci-9" target="aFF8EAabXUJYXRpht4ci-8" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="840" y="840" as="targetPoint" />
            <mxPoint x="810" y="730" as="sourcePoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="aFF8EAabXUJYXRpht4ci-11" value="Error?" style="rhombus;whiteSpace=wrap;html=1;fontColor=#333333;fillColor=#f5f5f5;strokeColor=#666666;" parent="1" vertex="1">
          <mxGeometry x="550" y="890" width="80" height="40" as="geometry" />
        </mxCell>
        <mxCell id="aFF8EAabXUJYXRpht4ci-12" value="no" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;verticalAlign=bottom;endArrow=open;endSize=8;strokeColor=#ff0000;rounded=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="aFF8EAabXUJYXRpht4ci-11" target="aFF8EAabXUJYXRpht4ci-16" edge="1">
          <mxGeometry y="-20" relative="1" as="geometry">
            <mxPoint x="500" y="1060" as="targetPoint" />
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="aFF8EAabXUJYXRpht4ci-13" value="yes" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;verticalAlign=top;endArrow=open;endSize=8;strokeColor=#ff0000;rounded=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="aFF8EAabXUJYXRpht4ci-11" target="aFF8EAabXUJYXRpht4ci-14" edge="1">
          <mxGeometry x="-1" y="30" relative="1" as="geometry">
            <mxPoint x="625" y="1030" as="targetPoint" />
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="aFF8EAabXUJYXRpht4ci-14" value="Return error" style="rounded=1;whiteSpace=wrap;html=1;arcSize=40;fillColor=#f8cecc;strokeColor=#b85450;" parent="1" vertex="1">
          <mxGeometry x="675" y="890" width="120" height="40" as="geometry" />
        </mxCell>
        <mxCell id="aFF8EAabXUJYXRpht4ci-15" value="" style="ellipse;html=1;shape=endState;fillColor=#000000;strokeColor=#ff0000;" parent="1" vertex="1">
          <mxGeometry x="575" y="1050" width="30" height="30" as="geometry" />
        </mxCell>
        <mxCell id="aFF8EAabXUJYXRpht4ci-16" value="Return nil" style="rounded=1;whiteSpace=wrap;html=1;arcSize=40;fillColor=#d5e8d4;strokeColor=#82b366;" parent="1" vertex="1">
          <mxGeometry x="530" y="970" width="120" height="40" as="geometry" />
        </mxCell>
        <mxCell id="aFF8EAabXUJYXRpht4ci-17" value="" style="edgeStyle=orthogonalEdgeStyle;html=1;verticalAlign=bottom;endArrow=open;endSize=8;strokeColor=#ff0000;rounded=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="aFF8EAabXUJYXRpht4ci-16" target="aFF8EAabXUJYXRpht4ci-15" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="420" y="830" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="aFF8EAabXUJYXRpht4ci-18" value="" style="edgeStyle=orthogonalEdgeStyle;html=1;verticalAlign=bottom;endArrow=open;endSize=8;strokeColor=#ff0000;rounded=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="aFF8EAabXUJYXRpht4ci-14" target="lugdHr5Z2LZSpCu2G0fi-5" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="910" y="1020" as="targetPoint" />
            <mxPoint x="600" y="1020" as="sourcePoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="FxEQDPhvqp9S6eHfguba-1" value="Optional: create a context with a timeout" style="rounded=1;whiteSpace=wrap;html=1;arcSize=40;fillColor=#d5e8d4;strokeColor=#82b366;" parent="1" vertex="1">
          <mxGeometry x="275" y="640" width="220" height="40" as="geometry" />
        </mxCell>
        <mxCell id="FxEQDPhvqp9S6eHfguba-2" value="" style="edgeStyle=orthogonalEdgeStyle;html=1;verticalAlign=bottom;endArrow=open;endSize=8;strokeColor=#ff0000;rounded=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" parent="1" source="FxEQDPhvqp9S6eHfguba-1" target="O9f6-C6ALdU0ipOdZWHA-1" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="395" y="740" as="targetPoint" />
            <mxPoint x="395" y="610" as="sourcePoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="FxEQDPhvqp9S6eHfguba-3" value="In case context is canceled or a timeout occurs" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#f5f5f5;fontColor=#333333;strokeColor=#666666;" parent="1" vertex="1">
          <mxGeometry x="550" y="740" width="160" height="40" as="geometry" />
        </mxCell>
        <mxCell id="FxEQDPhvqp9S6eHfguba-4" value="" style="endArrow=none;dashed=1;html=1;dashPattern=1 3;strokeWidth=2;rounded=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;exitX=0.5;exitY=0;exitDx=0;exitDy=0;" parent="1" source="aFF8EAabXUJYXRpht4ci-4" target="FxEQDPhvqp9S6eHfguba-3" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="390" y="810" as="sourcePoint" />
            <mxPoint x="440" y="760" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="FxEQDPhvqp9S6eHfguba-5" value="Startup channel receives either nil or an error" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#f5f5f5;fontColor=#333333;strokeColor=#666666;" parent="1" vertex="1">
          <mxGeometry x="280" y="950" width="160" height="40" as="geometry" />
        </mxCell>
        <mxCell id="FxEQDPhvqp9S6eHfguba-6" value="" style="endArrow=none;dashed=1;html=1;dashPattern=1 3;strokeWidth=2;rounded=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;exitX=0.5;exitY=0;exitDx=0;exitDy=0;" parent="1" source="FxEQDPhvqp9S6eHfguba-5" target="aFF8EAabXUJYXRpht4ci-1" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="390" y="810" as="sourcePoint" />
            <mxPoint x="440" y="760" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="FxEQDPhvqp9S6eHfguba-7" value="This context is bound to the engine lifetime and will be used to create all subcontextes.&lt;br&gt;&lt;br&gt;&lt;div style=&quot;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;It will be referred to as &#39;&lt;b&gt;engine context&lt;/b&gt;&#39;&lt;/span&gt;&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#f5f5f5;fontColor=#333333;strokeColor=#666666;align=left;" parent="1" vertex="1">
          <mxGeometry x="530" y="270" width="230" height="80" as="geometry" />
        </mxCell>
        <mxCell id="FxEQDPhvqp9S6eHfguba-8" value="" style="endArrow=none;dashed=1;html=1;dashPattern=1 3;strokeWidth=2;rounded=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;exitX=0;exitY=0.5;exitDx=0;exitDy=0;" parent="1" source="FxEQDPhvqp9S6eHfguba-7" target="dbodp6VFbfzhMpodNWT--11" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="390" y="510" as="sourcePoint" />
            <mxPoint x="440" y="460" as="targetPoint" />
          </mxGeometry>
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
  <diagram id="egwl5OkK3cRPt-CMz4Ez" name="startEngine">
    <mxGraphModel dx="1434" dy="750" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="QRwjlFwqAnFalx2ojPP_-1" value="" style="ellipse;html=1;shape=startState;fillColor=#000000;strokeColor=#ff0000;fontSize=12;" parent="1" vertex="1">
          <mxGeometry x="290" y="130" width="30" height="30" as="geometry" />
        </mxCell>
        <mxCell id="QRwjlFwqAnFalx2ojPP_-2" value="" style="edgeStyle=orthogonalEdgeStyle;html=1;verticalAlign=bottom;endArrow=open;endSize=8;strokeColor=#ff0000;rounded=0;fontSize=12;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="QRwjlFwqAnFalx2ojPP_-1" target="IkZBshrdg9a7quKfo_1r-1" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="415" y="430" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="QRwjlFwqAnFalx2ojPP_-3" value="Check start context" style="rounded=1;whiteSpace=wrap;html=1;arcSize=40;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=12;" parent="1" vertex="1">
          <mxGeometry x="245" y="280" width="120" height="40" as="geometry" />
        </mxCell>
        <mxCell id="QRwjlFwqAnFalx2ojPP_-4" value="" style="edgeStyle=orthogonalEdgeStyle;html=1;verticalAlign=bottom;endArrow=open;endSize=8;strokeColor=#ff0000;rounded=0;fontSize=12;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="QRwjlFwqAnFalx2ojPP_-3" target="QRwjlFwqAnFalx2ojPP_-5" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="530" y="490" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="QRwjlFwqAnFalx2ojPP_-5" value="Done?" style="rhombus;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;fontSize=12;fontColor=#333333;" parent="1" vertex="1">
          <mxGeometry x="265" y="360" width="80" height="40" as="geometry" />
        </mxCell>
        <mxCell id="QRwjlFwqAnFalx2ojPP_-6" value="no" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;verticalAlign=bottom;endArrow=open;endSize=8;strokeColor=#ff0000;rounded=0;fontSize=12;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="QRwjlFwqAnFalx2ojPP_-5" target="QRwjlFwqAnFalx2ojPP_-11" edge="1">
          <mxGeometry y="-35" relative="1" as="geometry">
            <mxPoint x="160" y="420" as="targetPoint" />
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="QRwjlFwqAnFalx2ojPP_-7" value="yes" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;verticalAlign=top;endArrow=open;endSize=8;strokeColor=#ff0000;rounded=0;fontSize=12;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="QRwjlFwqAnFalx2ojPP_-5" target="mjf1eUQFlUd65sz1qlqE-7" edge="1">
          <mxGeometry x="-0.75" y="30" relative="1" as="geometry">
            <mxPoint x="360" y="520" as="targetPoint" />
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="QRwjlFwqAnFalx2ojPP_-8" value="Channel &amp;lt;- Error: interrupted" style="rounded=1;whiteSpace=wrap;html=1;arcSize=40;fillColor=#f8cecc;strokeColor=#b85450;fontSize=12;" parent="1" vertex="1">
          <mxGeometry x="600" y="360" width="190" height="40" as="geometry" />
        </mxCell>
        <mxCell id="QRwjlFwqAnFalx2ojPP_-9" value="" style="edgeStyle=orthogonalEdgeStyle;html=1;verticalAlign=bottom;endArrow=open;endSize=8;strokeColor=#ff0000;rounded=0;fontSize=12;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="mjf1eUQFlUd65sz1qlqE-7" target="QRwjlFwqAnFalx2ojPP_-8" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="1160" y="410" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="QRwjlFwqAnFalx2ojPP_-10" value="" style="ellipse;html=1;shape=endState;fillColor=#000000;strokeColor=#ff0000;fontSize=12;" parent="1" vertex="1">
          <mxGeometry x="990" y="365" width="30" height="30" as="geometry" />
        </mxCell>
        <mxCell id="QRwjlFwqAnFalx2ojPP_-11" value="(Re)start?" style="rhombus;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;fontSize=12;fontColor=#333333;" parent="1" vertex="1">
          <mxGeometry x="265" y="440" width="80" height="40" as="geometry" />
        </mxCell>
        <mxCell id="QRwjlFwqAnFalx2ojPP_-12" value="no" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;verticalAlign=bottom;endArrow=open;endSize=8;strokeColor=#ff0000;rounded=0;fontSize=12;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="QRwjlFwqAnFalx2ojPP_-11" target="QRwjlFwqAnFalx2ojPP_-14" edge="1">
          <mxGeometry x="-0.75" y="10" relative="1" as="geometry">
            <mxPoint x="500" y="630" as="targetPoint" />
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="QRwjlFwqAnFalx2ojPP_-13" value="yes" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;verticalAlign=top;endArrow=open;endSize=8;strokeColor=#ff0000;rounded=0;fontSize=12;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="QRwjlFwqAnFalx2ojPP_-11" target="A6rXurBB_CUBOWeGFbPI-1" edge="1">
          <mxGeometry x="-1" y="-35" relative="1" as="geometry">
            <mxPoint x="305" y="520" as="targetPoint" />
            <mxPoint as="offset" />
            <Array as="points">
              <mxPoint x="305" y="600" />
              <mxPoint x="305" y="600" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="QRwjlFwqAnFalx2ojPP_-14" value="Channel &amp;lt;- Error: already started" style="rounded=1;whiteSpace=wrap;html=1;arcSize=40;fillColor=#f8cecc;strokeColor=#b85450;fontSize=12;" parent="1" vertex="1">
          <mxGeometry x="440" y="440" width="190" height="40" as="geometry" />
        </mxCell>
        <mxCell id="QRwjlFwqAnFalx2ojPP_-15" value="" style="edgeStyle=orthogonalEdgeStyle;html=1;verticalAlign=bottom;endArrow=open;endSize=8;strokeColor=#ff0000;rounded=0;fontSize=12;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="QRwjlFwqAnFalx2ojPP_-14" target="IkZBshrdg9a7quKfo_1r-3" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="570" y="720" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="QRwjlFwqAnFalx2ojPP_-16" value="" style="ellipse;html=1;shape=endState;fillColor=#000000;strokeColor=#ff0000;fontSize=12;" parent="1" vertex="1">
          <mxGeometry x="830" y="445" width="30" height="30" as="geometry" />
        </mxCell>
        <mxCell id="IkZBshrdg9a7quKfo_1r-1" value="Lock start mutex" style="rounded=1;whiteSpace=wrap;html=1;arcSize=40;fillColor=#e1d5e7;strokeColor=#9673a6;" parent="1" vertex="1">
          <mxGeometry x="245" y="200" width="120" height="40" as="geometry" />
        </mxCell>
        <mxCell id="IkZBshrdg9a7quKfo_1r-2" value="" style="edgeStyle=orthogonalEdgeStyle;html=1;verticalAlign=bottom;endArrow=open;endSize=8;strokeColor=#ff0000;rounded=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="IkZBshrdg9a7quKfo_1r-1" target="QRwjlFwqAnFalx2ojPP_-3" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="570" y="580" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="IkZBshrdg9a7quKfo_1r-3" value="Unlock start mutex" style="rounded=1;whiteSpace=wrap;html=1;arcSize=40;fillColor=#e1d5e7;strokeColor=#9673a6;" parent="1" vertex="1">
          <mxGeometry x="670" y="440" width="120" height="40" as="geometry" />
        </mxCell>
        <mxCell id="IkZBshrdg9a7quKfo_1r-4" value="" style="edgeStyle=orthogonalEdgeStyle;html=1;verticalAlign=bottom;endArrow=open;endSize=8;strokeColor=#ff0000;rounded=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="IkZBshrdg9a7quKfo_1r-3" target="QRwjlFwqAnFalx2ojPP_-16" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="780" y="635" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="UFn2u20-Kt_ocEbxJFI9-1" value="&lt;b&gt;&lt;font style=&quot;font-size: 18px;&quot;&gt;Websocket engine: background startup&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="345" y="125" width="360" height="40" as="geometry" />
        </mxCell>
        <mxCell id="PRDxW4sx72AYqb4vZjOp-1" value="&lt;b&gt;Inputs&lt;br&gt;&lt;/b&gt;&lt;br&gt;- &lt;b&gt;ctx&lt;/b&gt;: start or restart context&lt;br&gt;- &lt;b&gt;restart&lt;/b&gt;: indicates whether engine is restarting or not&lt;br&gt;- &lt;b&gt;startupChannel&lt;/b&gt;: Channel used to send background startup result&lt;br&gt;- &lt;b&gt;exit&lt;/b&gt;: Cancel function used to cancel engine context and stop the engine" style="rounded=0;whiteSpace=wrap;html=1;align=left;fillColor=#f5f5f5;fontColor=#333333;strokeColor=#666666;" vertex="1" parent="1">
          <mxGeometry x="410" y="190" width="410" height="100" as="geometry" />
        </mxCell>
        <mxCell id="PRDxW4sx72AYqb4vZjOp-2" value="Unlock start mutex" style="rounded=1;whiteSpace=wrap;html=1;arcSize=40;fillColor=#e1d5e7;strokeColor=#9673a6;" vertex="1" parent="1">
          <mxGeometry x="830" y="360" width="120" height="40" as="geometry" />
        </mxCell>
        <mxCell id="PRDxW4sx72AYqb4vZjOp-3" value="" style="edgeStyle=orthogonalEdgeStyle;html=1;verticalAlign=bottom;endArrow=open;endSize=8;strokeColor=#ff0000;rounded=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" edge="1" parent="1" source="PRDxW4sx72AYqb4vZjOp-2" target="QRwjlFwqAnFalx2ojPP_-10">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="1000" y="470" as="targetPoint" />
            <mxPoint x="960" y="470" as="sourcePoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="A6rXurBB_CUBOWeGFbPI-1" value="Connect to websocket server" style="rounded=1;whiteSpace=wrap;html=1;arcSize=40;fillColor=#d5e8d4;strokeColor=#82b366;" vertex="1" parent="1">
          <mxGeometry x="245" y="520" width="120" height="40" as="geometry" />
        </mxCell>
        <mxCell id="A6rXurBB_CUBOWeGFbPI-2" value="" style="edgeStyle=orthogonalEdgeStyle;html=1;verticalAlign=bottom;endArrow=open;endSize=8;strokeColor=#ff0000;rounded=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="A6rXurBB_CUBOWeGFbPI-1" target="A6rXurBB_CUBOWeGFbPI-3">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="555" y="805" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="A6rXurBB_CUBOWeGFbPI-3" value="Error?" style="rhombus;whiteSpace=wrap;html=1;fontColor=#333333;fillColor=#f5f5f5;strokeColor=#666666;" vertex="1" parent="1">
          <mxGeometry x="265" y="600" width="80" height="40" as="geometry" />
        </mxCell>
        <mxCell id="A6rXurBB_CUBOWeGFbPI-4" value="no" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;verticalAlign=bottom;endArrow=open;endSize=8;strokeColor=#ff0000;rounded=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="A6rXurBB_CUBOWeGFbPI-3" target="A6rXurBB_CUBOWeGFbPI-9">
          <mxGeometry y="-30" relative="1" as="geometry">
            <mxPoint x="470" y="710" as="targetPoint" />
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="A6rXurBB_CUBOWeGFbPI-5" value="yes" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;verticalAlign=top;endArrow=open;endSize=8;strokeColor=#ff0000;rounded=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="A6rXurBB_CUBOWeGFbPI-3" target="A6rXurBB_CUBOWeGFbPI-6">
          <mxGeometry x="-1" y="30" relative="1" as="geometry">
            <mxPoint x="330" y="790" as="targetPoint" />
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="A6rXurBB_CUBOWeGFbPI-6" value="Channel &amp;lt;- Error: connection failed" style="rounded=1;whiteSpace=wrap;html=1;arcSize=40;fillColor=#f8cecc;strokeColor=#b85450;" vertex="1" parent="1">
          <mxGeometry x="440" y="600" width="190" height="40" as="geometry" />
        </mxCell>
        <mxCell id="A6rXurBB_CUBOWeGFbPI-7" value="" style="edgeStyle=orthogonalEdgeStyle;html=1;verticalAlign=bottom;endArrow=open;endSize=8;strokeColor=#ff0000;rounded=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="A6rXurBB_CUBOWeGFbPI-6" target="QVXAW2f2m5xYOZWZ87JZ-4">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="585" y="620" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="A6rXurBB_CUBOWeGFbPI-9" value="Check start context" style="rounded=1;whiteSpace=wrap;html=1;arcSize=40;fillColor=#d5e8d4;strokeColor=#82b366;" vertex="1" parent="1">
          <mxGeometry x="245" y="680" width="120" height="40" as="geometry" />
        </mxCell>
        <mxCell id="A6rXurBB_CUBOWeGFbPI-10" value="" style="edgeStyle=orthogonalEdgeStyle;html=1;verticalAlign=bottom;endArrow=open;endSize=8;strokeColor=#ff0000;rounded=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="A6rXurBB_CUBOWeGFbPI-9" target="A6rXurBB_CUBOWeGFbPI-13">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="445" y="900" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="A6rXurBB_CUBOWeGFbPI-11" value="Call OnOpen" style="rounded=1;whiteSpace=wrap;html=1;arcSize=40;fillColor=#d5e8d4;strokeColor=#82b366;" vertex="1" parent="1">
          <mxGeometry x="245" y="840" width="120" height="40" as="geometry" />
        </mxCell>
        <mxCell id="A6rXurBB_CUBOWeGFbPI-12" value="" style="edgeStyle=orthogonalEdgeStyle;html=1;verticalAlign=bottom;endArrow=open;endSize=8;strokeColor=#ff0000;rounded=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="A6rXurBB_CUBOWeGFbPI-11" target="A6rXurBB_CUBOWeGFbPI-21">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="695" y="1030" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="A6rXurBB_CUBOWeGFbPI-13" value="Done?" style="rhombus;whiteSpace=wrap;html=1;fontColor=#333333;fillColor=#f5f5f5;strokeColor=#666666;" vertex="1" parent="1">
          <mxGeometry x="265" y="760" width="80" height="40" as="geometry" />
        </mxCell>
        <mxCell id="A6rXurBB_CUBOWeGFbPI-14" value="no" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;verticalAlign=bottom;endArrow=open;endSize=8;strokeColor=#ff0000;rounded=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="A6rXurBB_CUBOWeGFbPI-13" target="A6rXurBB_CUBOWeGFbPI-11">
          <mxGeometry y="-30" relative="1" as="geometry">
            <mxPoint x="445" y="800" as="targetPoint" />
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="A6rXurBB_CUBOWeGFbPI-15" value="yes" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;verticalAlign=top;endArrow=open;endSize=8;strokeColor=#ff0000;rounded=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="A6rXurBB_CUBOWeGFbPI-13" target="mjf1eUQFlUd65sz1qlqE-1">
          <mxGeometry x="-1" y="30" relative="1" as="geometry">
            <mxPoint x="425" y="780" as="targetPoint" />
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="A6rXurBB_CUBOWeGFbPI-18" value="Channel &amp;lt;- Error: interrupted" style="rounded=1;whiteSpace=wrap;html=1;arcSize=40;fillColor=#f8cecc;strokeColor=#b85450;" vertex="1" parent="1">
          <mxGeometry x="588" y="760" width="190" height="40" as="geometry" />
        </mxCell>
        <mxCell id="A6rXurBB_CUBOWeGFbPI-19" value="" style="edgeStyle=orthogonalEdgeStyle;html=1;verticalAlign=bottom;endArrow=open;endSize=8;strokeColor=#ff0000;rounded=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="A6rXurBB_CUBOWeGFbPI-18" target="QVXAW2f2m5xYOZWZ87JZ-7">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="868" y="780" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="A6rXurBB_CUBOWeGFbPI-21" value="Error?" style="rhombus;whiteSpace=wrap;html=1;fontColor=#333333;fillColor=#f5f5f5;strokeColor=#666666;" vertex="1" parent="1">
          <mxGeometry x="265" y="920" width="80" height="40" as="geometry" />
        </mxCell>
        <mxCell id="A6rXurBB_CUBOWeGFbPI-22" value="no" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;verticalAlign=bottom;endArrow=open;endSize=8;strokeColor=#ff0000;rounded=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="A6rXurBB_CUBOWeGFbPI-21" target="A6rXurBB_CUBOWeGFbPI-26">
          <mxGeometry y="-30" relative="1" as="geometry">
            <mxPoint x="205" y="990" as="targetPoint" />
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="A6rXurBB_CUBOWeGFbPI-23" value="yes" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;verticalAlign=top;endArrow=open;endSize=8;strokeColor=#ff0000;rounded=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="A6rXurBB_CUBOWeGFbPI-21" target="A6rXurBB_CUBOWeGFbPI-24">
          <mxGeometry x="-1" y="30" relative="1" as="geometry">
            <mxPoint x="295" y="1040" as="targetPoint" />
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="A6rXurBB_CUBOWeGFbPI-24" value="Close connection" style="rounded=1;whiteSpace=wrap;html=1;arcSize=40;fillColor=#f8cecc;strokeColor=#b85450;" vertex="1" parent="1">
          <mxGeometry x="425" y="920" width="120" height="40" as="geometry" />
        </mxCell>
        <mxCell id="A6rXurBB_CUBOWeGFbPI-25" value="" style="edgeStyle=orthogonalEdgeStyle;html=1;verticalAlign=bottom;endArrow=open;endSize=8;strokeColor=#ff0000;rounded=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="A6rXurBB_CUBOWeGFbPI-24" target="A6rXurBB_CUBOWeGFbPI-43">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="585" y="940" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="A6rXurBB_CUBOWeGFbPI-26" value="New goroutines:&lt;br&gt;runEngine" style="rounded=1;whiteSpace=wrap;html=1;arcSize=40;fillColor=#d5e8d4;strokeColor=#82b366;" vertex="1" parent="1">
          <mxGeometry x="245" y="1000" width="120" height="40" as="geometry" />
        </mxCell>
        <mxCell id="A6rXurBB_CUBOWeGFbPI-27" value="" style="edgeStyle=orthogonalEdgeStyle;html=1;verticalAlign=bottom;endArrow=open;endSize=8;strokeColor=#ff0000;rounded=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="A6rXurBB_CUBOWeGFbPI-26" target="mjf1eUQFlUd65sz1qlqE-13">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="305" y="1080" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="A6rXurBB_CUBOWeGFbPI-28" value="Channel:&lt;br&gt;success" style="rounded=1;whiteSpace=wrap;html=1;arcSize=40;fillColor=#d5e8d4;strokeColor=#82b366;" vertex="1" parent="1">
          <mxGeometry x="245" y="1160" width="120" height="40" as="geometry" />
        </mxCell>
        <mxCell id="A6rXurBB_CUBOWeGFbPI-29" value="" style="edgeStyle=orthogonalEdgeStyle;html=1;verticalAlign=bottom;endArrow=open;endSize=8;strokeColor=#ff0000;rounded=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="A6rXurBB_CUBOWeGFbPI-28" target="QVXAW2f2m5xYOZWZ87JZ-11">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="315" y="1370" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="A6rXurBB_CUBOWeGFbPI-30" value="" style="ellipse;html=1;shape=endState;fillColor=#000000;strokeColor=#ff0000;" vertex="1" parent="1">
          <mxGeometry x="290" y="1320" width="30" height="30" as="geometry" />
        </mxCell>
        <mxCell id="A6rXurBB_CUBOWeGFbPI-32" value="&lt;span style=&quot;background-color: initial;&quot;&gt;- If the engine is starting: Start will exit with an error&lt;/span&gt;&lt;br&gt;- If the engine is restarting, the engine will either try restarting again or stop" style="rounded=0;whiteSpace=wrap;html=1;align=left;fillColor=#f5f5f5;fontColor=#333333;strokeColor=#666666;" vertex="1" parent="1">
          <mxGeometry x="435" y="1040" width="415" height="45" as="geometry" />
        </mxCell>
        <mxCell id="A6rXurBB_CUBOWeGFbPI-33" value="The engine has started/restarted" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#f5f5f5;fontColor=#333333;strokeColor=#666666;" vertex="1" parent="1">
          <mxGeometry x="415" y="1320" width="200" height="30" as="geometry" />
        </mxCell>
        <mxCell id="A6rXurBB_CUBOWeGFbPI-34" value="Exit" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="335" y="1320" width="50" height="30" as="geometry" />
        </mxCell>
        <mxCell id="A6rXurBB_CUBOWeGFbPI-43" value="Channel &amp;lt;- Error" style="rounded=1;whiteSpace=wrap;html=1;arcSize=40;fillColor=#f8cecc;strokeColor=#b85450;" vertex="1" parent="1">
          <mxGeometry x="588" y="920" width="192" height="40" as="geometry" />
        </mxCell>
        <mxCell id="A6rXurBB_CUBOWeGFbPI-44" value="" style="edgeStyle=orthogonalEdgeStyle;html=1;verticalAlign=bottom;endArrow=open;endSize=8;strokeColor=#ff0000;rounded=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="A6rXurBB_CUBOWeGFbPI-43" target="QVXAW2f2m5xYOZWZ87JZ-9">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="931" y="940" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="A6rXurBB_CUBOWeGFbPI-45" value="" style="ellipse;html=1;shape=endState;fillColor=#000000;strokeColor=#ff0000;" vertex="1" parent="1">
          <mxGeometry x="970" y="925" width="30" height="30" as="geometry" />
        </mxCell>
        <mxCell id="A6rXurBB_CUBOWeGFbPI-54" value="Happen when start context is canceled or when a timeout occurs" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#f5f5f5;fontColor=#333333;strokeColor=#666666;" vertex="1" parent="1">
          <mxGeometry x="410" y="700" width="363" height="30" as="geometry" />
        </mxCell>
        <mxCell id="A6rXurBB_CUBOWeGFbPI-55" value="Happen when start context is canceled or when a timeout occurs" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#f5f5f5;fontColor=#333333;strokeColor=#666666;" vertex="1" parent="1">
          <mxGeometry x="410" y="310" width="363" height="30" as="geometry" />
        </mxCell>
        <mxCell id="A6rXurBB_CUBOWeGFbPI-56" value="" style="endArrow=none;dashed=1;html=1;dashPattern=1 3;strokeWidth=2;rounded=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;exitX=1;exitY=0;exitDx=0;exitDy=0;" edge="1" parent="1" source="QRwjlFwqAnFalx2ojPP_-5" target="A6rXurBB_CUBOWeGFbPI-55">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="580" y="620" as="sourcePoint" />
            <mxPoint x="630" y="570" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="A6rXurBB_CUBOWeGFbPI-57" value="" style="endArrow=none;dashed=1;html=1;dashPattern=1 3;strokeWidth=2;rounded=0;exitX=1;exitY=0;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="A6rXurBB_CUBOWeGFbPI-13" target="A6rXurBB_CUBOWeGFbPI-54">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="580" y="620" as="sourcePoint" />
            <mxPoint x="630" y="570" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="A6rXurBB_CUBOWeGFbPI-58" value="" style="endArrow=none;dashed=1;html=1;dashPattern=1 3;strokeWidth=2;rounded=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="A6rXurBB_CUBOWeGFbPI-32" target="QRwjlFwqAnFalx2ojPP_-10">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="580" y="920" as="sourcePoint" />
            <mxPoint x="615" y="620" as="targetPoint" />
            <Array as="points">
              <mxPoint x="1120" y="1063" />
              <mxPoint x="1120" y="380" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="A6rXurBB_CUBOWeGFbPI-59" value="" style="endArrow=none;dashed=1;html=1;dashPattern=1 3;strokeWidth=2;rounded=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" edge="1" parent="1" source="A6rXurBB_CUBOWeGFbPI-45">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1020" y="890" as="sourcePoint" />
            <mxPoint x="1120" y="940" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="A6rXurBB_CUBOWeGFbPI-60" value="" style="endArrow=none;dashed=1;html=1;dashPattern=1 3;strokeWidth=2;rounded=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" target="QVXAW2f2m5xYOZWZ87JZ-6">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1120" y="780" as="sourcePoint" />
            <mxPoint x="670" y="780" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="QVXAW2f2m5xYOZWZ87JZ-3" value="" style="ellipse;html=1;shape=endState;fillColor=#000000;strokeColor=#ff0000;fontSize=12;" vertex="1" parent="1">
          <mxGeometry x="830" y="605" width="30" height="30" as="geometry" />
        </mxCell>
        <mxCell id="QVXAW2f2m5xYOZWZ87JZ-4" value="Unlock start mutex" style="rounded=1;whiteSpace=wrap;html=1;arcSize=40;fillColor=#e1d5e7;strokeColor=#9673a6;" vertex="1" parent="1">
          <mxGeometry x="670" y="600" width="120" height="40" as="geometry" />
        </mxCell>
        <mxCell id="QVXAW2f2m5xYOZWZ87JZ-5" value="" style="edgeStyle=orthogonalEdgeStyle;html=1;verticalAlign=bottom;endArrow=open;endSize=8;strokeColor=#ff0000;rounded=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="QVXAW2f2m5xYOZWZ87JZ-4" target="QVXAW2f2m5xYOZWZ87JZ-3">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="780" y="795" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="QVXAW2f2m5xYOZWZ87JZ-6" value="" style="ellipse;html=1;shape=endState;fillColor=#000000;strokeColor=#ff0000;fontSize=12;" vertex="1" parent="1">
          <mxGeometry x="970" y="765" width="30" height="30" as="geometry" />
        </mxCell>
        <mxCell id="QVXAW2f2m5xYOZWZ87JZ-7" value="Unlock start mutex" style="rounded=1;whiteSpace=wrap;html=1;arcSize=40;fillColor=#e1d5e7;strokeColor=#9673a6;" vertex="1" parent="1">
          <mxGeometry x="810" y="760" width="120" height="40" as="geometry" />
        </mxCell>
        <mxCell id="QVXAW2f2m5xYOZWZ87JZ-8" value="" style="edgeStyle=orthogonalEdgeStyle;html=1;verticalAlign=bottom;endArrow=open;endSize=8;strokeColor=#ff0000;rounded=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="QVXAW2f2m5xYOZWZ87JZ-7" target="QVXAW2f2m5xYOZWZ87JZ-6">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="880" y="955" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="QVXAW2f2m5xYOZWZ87JZ-9" value="Unlock start mutex" style="rounded=1;whiteSpace=wrap;html=1;arcSize=40;fillColor=#e1d5e7;strokeColor=#9673a6;" vertex="1" parent="1">
          <mxGeometry x="810" y="920" width="120" height="40" as="geometry" />
        </mxCell>
        <mxCell id="QVXAW2f2m5xYOZWZ87JZ-10" value="" style="edgeStyle=orthogonalEdgeStyle;html=1;verticalAlign=bottom;endArrow=open;endSize=8;strokeColor=#ff0000;rounded=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="QVXAW2f2m5xYOZWZ87JZ-9" target="A6rXurBB_CUBOWeGFbPI-45">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="930" y="950" as="targetPoint" />
            <mxPoint x="778" y="950" as="sourcePoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="QVXAW2f2m5xYOZWZ87JZ-11" value="Unlock start mutex" style="rounded=1;whiteSpace=wrap;html=1;arcSize=40;fillColor=#e1d5e7;strokeColor=#9673a6;" vertex="1" parent="1">
          <mxGeometry x="245" y="1240" width="120" height="40" as="geometry" />
        </mxCell>
        <mxCell id="QVXAW2f2m5xYOZWZ87JZ-12" value="" style="edgeStyle=orthogonalEdgeStyle;html=1;verticalAlign=bottom;endArrow=open;endSize=8;strokeColor=#ff0000;rounded=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" edge="1" parent="1" source="QVXAW2f2m5xYOZWZ87JZ-11" target="A6rXurBB_CUBOWeGFbPI-30">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="315" y="1250" as="targetPoint" />
            <mxPoint x="315" y="1210" as="sourcePoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="mjf1eUQFlUd65sz1qlqE-1" value="Close connection" style="rounded=1;whiteSpace=wrap;html=1;arcSize=40;fillColor=#f8cecc;strokeColor=#b85450;" vertex="1" parent="1">
          <mxGeometry x="425" y="760" width="120" height="40" as="geometry" />
        </mxCell>
        <mxCell id="mjf1eUQFlUd65sz1qlqE-2" value="" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;verticalAlign=top;endArrow=open;endSize=8;strokeColor=#ff0000;rounded=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" edge="1" parent="1" source="mjf1eUQFlUd65sz1qlqE-1" target="A6rXurBB_CUBOWeGFbPI-18">
          <mxGeometry x="-1" y="30" relative="1" as="geometry">
            <mxPoint x="440" y="880" as="targetPoint" />
            <mxPoint as="offset" />
            <mxPoint x="355" y="790" as="sourcePoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="mjf1eUQFlUd65sz1qlqE-3" value="Force close connection by safety (with 1001 Going Away code)" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#f5f5f5;fontColor=#333333;strokeColor=#666666;" vertex="1" parent="1">
          <mxGeometry x="467" y="845" width="360" height="30" as="geometry" />
        </mxCell>
        <mxCell id="mjf1eUQFlUd65sz1qlqE-5" value="" style="endArrow=none;dashed=1;html=1;dashPattern=1 3;strokeWidth=2;rounded=0;entryX=0.25;entryY=0;entryDx=0;entryDy=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" edge="1" parent="1" source="mjf1eUQFlUd65sz1qlqE-1" target="mjf1eUQFlUd65sz1qlqE-3">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="460" y="830" as="sourcePoint" />
            <mxPoint x="630" y="750" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="mjf1eUQFlUd65sz1qlqE-6" value="" style="endArrow=none;dashed=1;html=1;dashPattern=1 3;strokeWidth=2;rounded=0;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0.25;entryY=1;entryDx=0;entryDy=0;" edge="1" parent="1" source="A6rXurBB_CUBOWeGFbPI-24" target="mjf1eUQFlUd65sz1qlqE-3">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="580" y="800" as="sourcePoint" />
            <mxPoint x="630" y="750" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="mjf1eUQFlUd65sz1qlqE-7" value="Set start flag to false" style="rounded=1;whiteSpace=wrap;html=1;arcSize=40;fillColor=#f8cecc;strokeColor=#b85450;" vertex="1" parent="1">
          <mxGeometry x="440" y="360" width="120" height="40" as="geometry" />
        </mxCell>
        <mxCell id="mjf1eUQFlUd65sz1qlqE-8" value="" style="edgeStyle=orthogonalEdgeStyle;html=1;verticalAlign=bottom;endArrow=open;endSize=8;strokeColor=#ff0000;rounded=0;fontSize=12;entryX=0;entryY=0.5;entryDx=0;entryDy=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" edge="1" parent="1" source="QRwjlFwqAnFalx2ojPP_-8" target="PRDxW4sx72AYqb4vZjOp-2">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="720" y="390" as="targetPoint" />
            <mxPoint x="640" y="390" as="sourcePoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="mjf1eUQFlUd65sz1qlqE-11" value="" style="endArrow=none;dashed=1;html=1;dashPattern=1 3;strokeWidth=2;rounded=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" edge="1" parent="1" source="QRwjlFwqAnFalx2ojPP_-16">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="580" y="700" as="sourcePoint" />
            <mxPoint x="1120" y="460" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="mjf1eUQFlUd65sz1qlqE-12" value="" style="endArrow=none;dashed=1;html=1;dashPattern=1 3;strokeWidth=2;rounded=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" edge="1" parent="1" source="QVXAW2f2m5xYOZWZ87JZ-3">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="580" y="600" as="sourcePoint" />
            <mxPoint x="1120" y="620" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="mjf1eUQFlUd65sz1qlqE-13" value="Set start flag to true" style="rounded=1;whiteSpace=wrap;html=1;arcSize=40;fillColor=#d5e8d4;strokeColor=#82b366;" vertex="1" parent="1">
          <mxGeometry x="245" y="1080" width="120" height="40" as="geometry" />
        </mxCell>
        <mxCell id="mjf1eUQFlUd65sz1qlqE-14" value="" style="edgeStyle=orthogonalEdgeStyle;html=1;verticalAlign=bottom;endArrow=open;endSize=8;strokeColor=#ff0000;rounded=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" edge="1" parent="1" source="mjf1eUQFlUd65sz1qlqE-13" target="A6rXurBB_CUBOWeGFbPI-28">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="525" y="1179" as="targetPoint" />
            <mxPoint x="375" y="1030" as="sourcePoint" />
          </mxGeometry>
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
  <diagram id="Mm-yF5tu31Shl3jJuF8R" name="runEngine">
    <mxGraphModel dx="2261" dy="750" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="K95-BbwWhIkPTgnNecL5-1" value="" style="ellipse;html=1;shape=startState;fillColor=#000000;strokeColor=#ff0000;" parent="1" vertex="1">
          <mxGeometry x="60" y="120" width="30" height="30" as="geometry" />
        </mxCell>
        <mxCell id="K95-BbwWhIkPTgnNecL5-2" value="" style="edgeStyle=orthogonalEdgeStyle;html=1;verticalAlign=bottom;endArrow=open;endSize=8;strokeColor=#ff0000;rounded=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="K95-BbwWhIkPTgnNecL5-1" target="K95-BbwWhIkPTgnNecL5-3" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="145" y="330" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="K95-BbwWhIkPTgnNecL5-3" value="Loop" style="rounded=1;whiteSpace=wrap;html=1;arcSize=40;fillColor=#f5f5f5;strokeColor=#666666;fontColor=#333333;" parent="1" vertex="1">
          <mxGeometry x="17.5" y="200" width="115" height="40" as="geometry" />
        </mxCell>
        <mxCell id="K95-BbwWhIkPTgnNecL5-4" value="" style="edgeStyle=orthogonalEdgeStyle;html=1;verticalAlign=bottom;endArrow=open;endSize=8;strokeColor=#ff0000;rounded=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="K95-BbwWhIkPTgnNecL5-3" target="K95-BbwWhIkPTgnNecL5-19" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="270" y="470" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="K95-BbwWhIkPTgnNecL5-5" value="Check session context" style="rounded=1;whiteSpace=wrap;html=1;arcSize=40;fillColor=#d5e8d4;strokeColor=#82b366;" parent="1" vertex="1">
          <mxGeometry x="320" y="200" width="120" height="40" as="geometry" />
        </mxCell>
        <mxCell id="K95-BbwWhIkPTgnNecL5-6" value="" style="edgeStyle=orthogonalEdgeStyle;html=1;verticalAlign=bottom;endArrow=open;endSize=8;strokeColor=#ff0000;rounded=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="K95-BbwWhIkPTgnNecL5-5" target="K95-BbwWhIkPTgnNecL5-7" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="550" y="550" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="K95-BbwWhIkPTgnNecL5-7" value="Done?" style="rhombus;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;fontColor=#333333;" parent="1" vertex="1">
          <mxGeometry x="480" y="200" width="80" height="40" as="geometry" />
        </mxCell>
        <mxCell id="K95-BbwWhIkPTgnNecL5-8" value="no" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;verticalAlign=bottom;endArrow=open;endSize=8;strokeColor=#ff0000;rounded=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="K95-BbwWhIkPTgnNecL5-7" target="K95-BbwWhIkPTgnNecL5-12" edge="1">
          <mxGeometry x="0.5" y="10" relative="1" as="geometry">
            <mxPoint x="810" y="390" as="targetPoint" />
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="K95-BbwWhIkPTgnNecL5-9" value="yes" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;verticalAlign=top;endArrow=open;endSize=8;strokeColor=#ff0000;rounded=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="K95-BbwWhIkPTgnNecL5-7" target="K95-BbwWhIkPTgnNecL5-68" edge="1">
          <mxGeometry x="-0.4545" y="30" relative="1" as="geometry">
            <mxPoint x="760" y="220" as="targetPoint" />
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="K95-BbwWhIkPTgnNecL5-12" value="Read message" style="rounded=1;whiteSpace=wrap;html=1;arcSize=40;fillColor=#d5e8d4;strokeColor=#82b366;" parent="1" vertex="1">
          <mxGeometry x="460" y="280" width="120" height="40" as="geometry" />
        </mxCell>
        <mxCell id="K95-BbwWhIkPTgnNecL5-13" value="" style="edgeStyle=orthogonalEdgeStyle;html=1;verticalAlign=bottom;endArrow=open;endSize=8;strokeColor=#ff0000;rounded=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="K95-BbwWhIkPTgnNecL5-12" target="hl4_y-9aQjZpBxU0-aQC-1" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="580" y="650" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="K95-BbwWhIkPTgnNecL5-14" value="Error?" style="rhombus;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;fontColor=#333333;" parent="1" vertex="1">
          <mxGeometry x="480" y="515" width="80" height="40" as="geometry" />
        </mxCell>
        <mxCell id="K95-BbwWhIkPTgnNecL5-15" value="no" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;verticalAlign=bottom;endArrow=open;endSize=8;strokeColor=#ff0000;rounded=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="K95-BbwWhIkPTgnNecL5-14" target="K95-BbwWhIkPTgnNecL5-17" edge="1">
          <mxGeometry x="-0.7143" relative="1" as="geometry">
            <mxPoint x="440" y="775" as="targetPoint" />
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="K95-BbwWhIkPTgnNecL5-16" value="yes" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;verticalAlign=top;endArrow=open;endSize=8;strokeColor=#ff0000;rounded=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;exitX=0;exitY=0.5;exitDx=0;exitDy=0;" parent="1" edge="1" target="K95-BbwWhIkPTgnNecL5-29" source="K95-BbwWhIkPTgnNecL5-14">
          <mxGeometry x="0.5" y="5" relative="1" as="geometry">
            <mxPoint x="400" y="636" as="targetPoint" />
            <mxPoint x="480" y="576" as="sourcePoint" />
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="K95-BbwWhIkPTgnNecL5-17" value="Unlock mutex" style="rounded=1;whiteSpace=wrap;html=1;arcSize=40;fillColor=#e1d5e7;strokeColor=#9673a6;" parent="1" vertex="1">
          <mxGeometry x="580" y="555" width="120" height="40" as="geometry" />
        </mxCell>
        <mxCell id="K95-BbwWhIkPTgnNecL5-18" value="" style="edgeStyle=orthogonalEdgeStyle;html=1;verticalAlign=bottom;endArrow=open;endSize=8;strokeColor=#ff0000;rounded=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="K95-BbwWhIkPTgnNecL5-17" target="K95-BbwWhIkPTgnNecL5-21" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="510" y="845" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="K95-BbwWhIkPTgnNecL5-19" value="Lock mutex" style="rounded=1;whiteSpace=wrap;html=1;arcSize=40;fillColor=#e1d5e7;strokeColor=#9673a6;" parent="1" vertex="1">
          <mxGeometry x="160" y="200" width="120" height="40" as="geometry" />
        </mxCell>
        <mxCell id="K95-BbwWhIkPTgnNecL5-20" value="" style="edgeStyle=orthogonalEdgeStyle;html=1;verticalAlign=bottom;endArrow=open;endSize=8;strokeColor=#ff0000;rounded=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="K95-BbwWhIkPTgnNecL5-19" target="K95-BbwWhIkPTgnNecL5-5" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="400" y="260" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="K95-BbwWhIkPTgnNecL5-21" value="OnMessage" style="rounded=1;whiteSpace=wrap;html=1;arcSize=40;fillColor=#d5e8d4;strokeColor=#82b366;" parent="1" vertex="1">
          <mxGeometry x="580" y="635" width="120" height="40" as="geometry" />
        </mxCell>
        <mxCell id="K95-BbwWhIkPTgnNecL5-22" value="" style="edgeStyle=orthogonalEdgeStyle;html=1;verticalAlign=bottom;endArrow=open;endSize=8;strokeColor=#ff0000;rounded=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="K95-BbwWhIkPTgnNecL5-21" target="K95-BbwWhIkPTgnNecL5-3" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="400" y="730" as="targetPoint" />
            <Array as="points">
              <mxPoint x="640" y="720" />
              <mxPoint x="-200" y="720" />
              <mxPoint x="-200" y="220" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="K95-BbwWhIkPTgnNecL5-25" value="Call OnReadError" style="rounded=1;whiteSpace=wrap;html=1;arcSize=40;fillColor=#f8cecc;strokeColor=#b85450;" parent="1" vertex="1">
          <mxGeometry x="180" y="515" width="120" height="40" as="geometry" />
        </mxCell>
        <mxCell id="K95-BbwWhIkPTgnNecL5-26" value="" style="edgeStyle=orthogonalEdgeStyle;html=1;verticalAlign=bottom;endArrow=open;endSize=8;strokeColor=#ff0000;rounded=0;" parent="1" source="K95-BbwWhIkPTgnNecL5-25" target="K95-BbwWhIkPTgnNecL5-37" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="240" y="595" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="K95-BbwWhIkPTgnNecL5-29" value="Closed?" style="rhombus;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;fontColor=#333333;" parent="1" vertex="1">
          <mxGeometry x="360" y="515" width="80" height="40" as="geometry" />
        </mxCell>
        <mxCell id="K95-BbwWhIkPTgnNecL5-30" value="no" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;verticalAlign=bottom;endArrow=open;endSize=8;strokeColor=#ff0000;rounded=0;" parent="1" source="K95-BbwWhIkPTgnNecL5-29" target="K95-BbwWhIkPTgnNecL5-25" edge="1">
          <mxGeometry x="0.5" y="20" relative="1" as="geometry">
            <mxPoint x="330" y="425" as="targetPoint" />
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="K95-BbwWhIkPTgnNecL5-31" value="yes" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;verticalAlign=top;endArrow=open;endSize=8;strokeColor=#ff0000;rounded=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;" parent="1" source="K95-BbwWhIkPTgnNecL5-29" target="K95-BbwWhIkPTgnNecL5-71" edge="1">
          <mxGeometry x="0.4286" y="-10" relative="1" as="geometry">
            <mxPoint x="240" y="715" as="targetPoint" />
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="K95-BbwWhIkPTgnNecL5-37" value="Check session context" style="rounded=1;whiteSpace=wrap;html=1;arcSize=40;fillColor=#f8cecc;strokeColor=#b85450;" parent="1" vertex="1">
          <mxGeometry x="180" y="600" width="120" height="40" as="geometry" />
        </mxCell>
        <mxCell id="K95-BbwWhIkPTgnNecL5-38" value="" style="edgeStyle=orthogonalEdgeStyle;html=1;verticalAlign=bottom;endArrow=open;endSize=8;strokeColor=#ff0000;rounded=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;" parent="1" source="K95-BbwWhIkPTgnNecL5-37" target="K95-BbwWhIkPTgnNecL5-63" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="-160" y="395" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="K95-BbwWhIkPTgnNecL5-45" value="sync.Once&lt;br&gt;shutdown(false)" style="rounded=1;whiteSpace=wrap;html=1;arcSize=40;fillColor=#ffe6cc;strokeColor=#d79b00;" parent="1" vertex="1">
          <mxGeometry x="-160" y="555" width="120" height="40" as="geometry" />
        </mxCell>
        <mxCell id="K95-BbwWhIkPTgnNecL5-46" value="" style="edgeStyle=orthogonalEdgeStyle;html=1;verticalAlign=bottom;endArrow=open;endSize=8;strokeColor=#ff0000;rounded=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;" parent="1" source="K95-BbwWhIkPTgnNecL5-45" target="K95-BbwWhIkPTgnNecL5-59" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="-40" y="505" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="K95-BbwWhIkPTgnNecL5-47" value="" style="ellipse;html=1;shape=endState;fillColor=#000000;strokeColor=#ff0000;" parent="1" vertex="1">
          <mxGeometry x="-115" y="400" width="30" height="30" as="geometry" />
        </mxCell>
        <mxCell id="K95-BbwWhIkPTgnNecL5-54" value="sync.Once&lt;br&gt;shutdown(true)" style="rounded=1;whiteSpace=wrap;html=1;arcSize=40;fillColor=#ffe6cc;strokeColor=#d79b00;" parent="1" vertex="1">
          <mxGeometry x="180" y="440" width="120" height="40" as="geometry" />
        </mxCell>
        <mxCell id="K95-BbwWhIkPTgnNecL5-55" value="" style="edgeStyle=orthogonalEdgeStyle;html=1;verticalAlign=bottom;endArrow=open;endSize=8;strokeColor=#ff0000;rounded=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;" parent="1" source="K95-BbwWhIkPTgnNecL5-54" target="K95-BbwWhIkPTgnNecL5-57" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="140" y="505" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="K95-BbwWhIkPTgnNecL5-56" value="" style="ellipse;html=1;shape=endState;fillColor=#000000;strokeColor=#ff0000;" parent="1" vertex="1">
          <mxGeometry x="225" y="290" width="30" height="30" as="geometry" />
        </mxCell>
        <mxCell id="K95-BbwWhIkPTgnNecL5-57" value="Unlock mutex" style="rounded=1;whiteSpace=wrap;html=1;arcSize=40;fillColor=#e1d5e7;strokeColor=#9673a6;" parent="1" vertex="1">
          <mxGeometry x="180" y="360" width="120" height="40" as="geometry" />
        </mxCell>
        <mxCell id="K95-BbwWhIkPTgnNecL5-58" value="" style="edgeStyle=orthogonalEdgeStyle;html=1;verticalAlign=bottom;endArrow=open;endSize=8;strokeColor=#ff0000;rounded=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;" parent="1" source="K95-BbwWhIkPTgnNecL5-57" target="K95-BbwWhIkPTgnNecL5-56" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="340" y="380" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="K95-BbwWhIkPTgnNecL5-59" value="Unlock mutex" style="rounded=1;whiteSpace=wrap;html=1;arcSize=40;fillColor=#e1d5e7;strokeColor=#9673a6;" parent="1" vertex="1">
          <mxGeometry x="-160" y="470" width="120" height="40" as="geometry" />
        </mxCell>
        <mxCell id="K95-BbwWhIkPTgnNecL5-60" value="" style="edgeStyle=orthogonalEdgeStyle;html=1;verticalAlign=bottom;endArrow=open;endSize=8;strokeColor=#ff0000;rounded=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;" parent="1" source="K95-BbwWhIkPTgnNecL5-59" target="K95-BbwWhIkPTgnNecL5-47" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="-130" y="465" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="K95-BbwWhIkPTgnNecL5-63" value="Done?" style="rhombus;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;fontColor=#333333;" parent="1" vertex="1">
          <mxGeometry x="35" y="555" width="80" height="40" as="geometry" />
        </mxCell>
        <mxCell id="K95-BbwWhIkPTgnNecL5-64" value="no" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;verticalAlign=bottom;endArrow=open;endSize=8;strokeColor=#ff0000;rounded=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;" parent="1" source="K95-BbwWhIkPTgnNecL5-63" target="K95-BbwWhIkPTgnNecL5-75" edge="1">
          <mxGeometry x="-0.2" y="-15" relative="1" as="geometry">
            <mxPoint x="75" y="465" as="targetPoint" />
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="K95-BbwWhIkPTgnNecL5-65" value="yes" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;verticalAlign=top;endArrow=open;endSize=8;strokeColor=#ff0000;rounded=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="K95-BbwWhIkPTgnNecL5-63" target="K95-BbwWhIkPTgnNecL5-45" edge="1">
          <mxGeometry x="0.2" y="-30" relative="1" as="geometry">
            <mxPoint x="-160" y="435" as="targetPoint" />
            <Array as="points">
              <mxPoint x="5" y="575" />
            </Array>
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="K95-BbwWhIkPTgnNecL5-66" value="Unlock mutex" style="rounded=1;whiteSpace=wrap;html=1;arcSize=40;fillColor=#e1d5e7;strokeColor=#9673a6;" parent="1" vertex="1">
          <mxGeometry x="760" y="200" width="120" height="40" as="geometry" />
        </mxCell>
        <mxCell id="K95-BbwWhIkPTgnNecL5-67" value="" style="edgeStyle=orthogonalEdgeStyle;html=1;verticalAlign=bottom;endArrow=open;endSize=8;strokeColor=#ff0000;rounded=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="K95-BbwWhIkPTgnNecL5-66" target="K95-BbwWhIkPTgnNecL5-70" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="990" y="150" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="K95-BbwWhIkPTgnNecL5-68" value="sync.Once shutdown(false)" style="rounded=1;whiteSpace=wrap;html=1;arcSize=40;fillColor=#ffe6cc;strokeColor=#d79b00;" parent="1" vertex="1">
          <mxGeometry x="600" y="200" width="120" height="40" as="geometry" />
        </mxCell>
        <mxCell id="K95-BbwWhIkPTgnNecL5-69" value="" style="edgeStyle=orthogonalEdgeStyle;html=1;verticalAlign=bottom;endArrow=open;endSize=8;strokeColor=#ff0000;rounded=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="K95-BbwWhIkPTgnNecL5-68" target="K95-BbwWhIkPTgnNecL5-66" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="970" y="570" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="K95-BbwWhIkPTgnNecL5-70" value="" style="ellipse;html=1;shape=endState;fillColor=#000000;strokeColor=#ff0000;" parent="1" vertex="1">
          <mxGeometry x="805" y="280" width="30" height="30" as="geometry" />
        </mxCell>
        <mxCell id="K95-BbwWhIkPTgnNecL5-71" value="Cancel session context" style="rounded=1;whiteSpace=wrap;html=1;arcSize=40;fillColor=#f8cecc;strokeColor=#b85450;" parent="1" vertex="1">
          <mxGeometry x="340" y="440" width="120" height="40" as="geometry" />
        </mxCell>
        <mxCell id="K95-BbwWhIkPTgnNecL5-72" value="" style="edgeStyle=orthogonalEdgeStyle;html=1;verticalAlign=bottom;endArrow=open;endSize=8;strokeColor=#ff0000;rounded=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="K95-BbwWhIkPTgnNecL5-71" target="K95-BbwWhIkPTgnNecL5-54" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="475" y="255" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="K95-BbwWhIkPTgnNecL5-73" value="Exit" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontStyle=1" parent="1" vertex="1">
          <mxGeometry x="250" y="290" width="50" height="30" as="geometry" />
        </mxCell>
        <mxCell id="K95-BbwWhIkPTgnNecL5-74" value="Start" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontStyle=1" parent="1" vertex="1">
          <mxGeometry x="82.5" y="120" width="50" height="30" as="geometry" />
        </mxCell>
        <mxCell id="K95-BbwWhIkPTgnNecL5-75" value="Unlock mutex" style="rounded=1;whiteSpace=wrap;html=1;arcSize=40;fillColor=#e1d5e7;strokeColor=#9673a6;" parent="1" vertex="1">
          <mxGeometry x="15" y="470" width="120" height="40" as="geometry" />
        </mxCell>
        <mxCell id="K95-BbwWhIkPTgnNecL5-76" value="" style="edgeStyle=orthogonalEdgeStyle;html=1;verticalAlign=bottom;endArrow=open;endSize=8;strokeColor=#ff0000;rounded=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;" parent="1" source="K95-BbwWhIkPTgnNecL5-75" target="K95-BbwWhIkPTgnNecL5-3" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="120" y="360" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="K95-BbwWhIkPTgnNecL5-79" value="Exit" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontStyle=1" parent="1" vertex="1">
          <mxGeometry x="-90" y="400" width="50" height="30" as="geometry" />
        </mxCell>
        <mxCell id="e4V6pRYqFUUh1AJrTbYU-1" value="Exit" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontStyle=1" parent="1" vertex="1">
          <mxGeometry x="830" y="280" width="50" height="30" as="geometry" />
        </mxCell>
        <mxCell id="e4V6pRYqFUUh1AJrTbYU-2" value="&lt;b&gt;&lt;font style=&quot;font-size: 18px;&quot;&gt;Websocket engine : background tasks logic&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="-250" y="30" width="400" height="40" as="geometry" />
        </mxCell>
        <mxCell id="8Dd-OO68QNTQGV4MJhRt-1" value="Unlock mutex so another goroutine can start handling a new message while this goroutine -&amp;gt; OnMessage" style="rounded=0;whiteSpace=wrap;html=1;align=left;fillColor=#f5f5f5;fontColor=#333333;strokeColor=#666666;" parent="1" vertex="1">
          <mxGeometry x="350" y="615" width="200" height="60" as="geometry" />
        </mxCell>
        <mxCell id="8Dd-OO68QNTQGV4MJhRt-2" value="" style="endArrow=none;dashed=1;html=1;rounded=0;entryX=0.25;entryY=1;entryDx=0;entryDy=0;exitX=0.5;exitY=0;exitDx=0;exitDy=0;" parent="1" source="8Dd-OO68QNTQGV4MJhRt-1" target="K95-BbwWhIkPTgnNecL5-17" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="340" y="575" as="sourcePoint" />
            <mxPoint x="390" y="525" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="yYnKiSRebz5MgO_4CoPz-1" value="&lt;b&gt;Inputs&lt;br&gt;&lt;/b&gt;&lt;br&gt;- &lt;b&gt;sessionCtx&lt;/b&gt;: context bound to connection lifetime&lt;br&gt;- &lt;b&gt;cancelSession&lt;/b&gt;: Cancel function used to restart the engine&lt;br&gt;- &lt;b&gt;exit&lt;/b&gt;: Cancel function used to stop the engine&lt;br&gt;- &lt;b&gt;conn&lt;/b&gt;: Websocket connection adapter used to itneract with the websocket connection&lt;br&gt;- &lt;b&gt;shutdownSync&lt;/b&gt;: Monitor used to ensure shutdown logic is performed only once by an engine goroutine&lt;br&gt;- &lt;b&gt;sessionId&lt;/b&gt;: ID bound to the session lifetime&lt;br&gt;- &lt;b&gt;routineId&lt;/b&gt;: ID assigned to the goroutine" style="rounded=0;whiteSpace=wrap;html=1;align=left;fillColor=#f5f5f5;fontColor=#333333;strokeColor=#666666;" vertex="1" parent="1">
          <mxGeometry x="200" y="40" width="595" height="140" as="geometry" />
        </mxCell>
        <mxCell id="hl4_y-9aQjZpBxU0-aQC-1" value="Check session context" style="rounded=1;whiteSpace=wrap;html=1;arcSize=40;fillColor=#d5e8d4;strokeColor=#82b366;" vertex="1" parent="1">
          <mxGeometry x="460" y="360" width="120" height="40" as="geometry" />
        </mxCell>
        <mxCell id="hl4_y-9aQjZpBxU0-aQC-2" value="" style="edgeStyle=orthogonalEdgeStyle;html=1;verticalAlign=bottom;endArrow=open;endSize=8;strokeColor=#ff0000;rounded=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="hl4_y-9aQjZpBxU0-aQC-1" target="hl4_y-9aQjZpBxU0-aQC-3">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="930" y="700" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="hl4_y-9aQjZpBxU0-aQC-3" value="Done?" style="rhombus;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;fontColor=#333333;" vertex="1" parent="1">
          <mxGeometry x="480" y="440" width="80" height="40" as="geometry" />
        </mxCell>
        <mxCell id="hl4_y-9aQjZpBxU0-aQC-4" value="yes" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;verticalAlign=top;endArrow=open;endSize=8;strokeColor=#ff0000;rounded=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="hl4_y-9aQjZpBxU0-aQC-3" target="hl4_y-9aQjZpBxU0-aQC-6">
          <mxGeometry x="-0.4545" y="30" relative="1" as="geometry">
            <mxPoint x="1140" y="370" as="targetPoint" />
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="hl4_y-9aQjZpBxU0-aQC-5" value="Unlock mutex" style="rounded=1;whiteSpace=wrap;html=1;arcSize=40;fillColor=#e1d5e7;strokeColor=#9673a6;" vertex="1" parent="1">
          <mxGeometry x="760" y="440" width="120" height="40" as="geometry" />
        </mxCell>
        <mxCell id="hl4_y-9aQjZpBxU0-aQC-6" value="sync.Once shutdown(false)" style="rounded=1;whiteSpace=wrap;html=1;arcSize=40;fillColor=#ffe6cc;strokeColor=#d79b00;" vertex="1" parent="1">
          <mxGeometry x="600" y="440" width="120" height="40" as="geometry" />
        </mxCell>
        <mxCell id="hl4_y-9aQjZpBxU0-aQC-7" value="" style="edgeStyle=orthogonalEdgeStyle;html=1;verticalAlign=bottom;endArrow=open;endSize=8;strokeColor=#ff0000;rounded=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="hl4_y-9aQjZpBxU0-aQC-6" target="hl4_y-9aQjZpBxU0-aQC-5">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="1350" y="720" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="hl4_y-9aQjZpBxU0-aQC-8" value="" style="ellipse;html=1;shape=endState;fillColor=#000000;strokeColor=#ff0000;" vertex="1" parent="1">
          <mxGeometry x="805" y="515" width="30" height="30" as="geometry" />
        </mxCell>
        <mxCell id="hl4_y-9aQjZpBxU0-aQC-9" value="Exit" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="835" y="515" width="50" height="30" as="geometry" />
        </mxCell>
        <mxCell id="hl4_y-9aQjZpBxU0-aQC-10" value="" style="edgeStyle=orthogonalEdgeStyle;html=1;verticalAlign=bottom;endArrow=open;endSize=8;strokeColor=#ff0000;rounded=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" edge="1" parent="1" source="hl4_y-9aQjZpBxU0-aQC-5" target="hl4_y-9aQjZpBxU0-aQC-8">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="830" y="290" as="targetPoint" />
            <mxPoint x="830" y="250" as="sourcePoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="hl4_y-9aQjZpBxU0-aQC-11" value="no" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;verticalAlign=bottom;endArrow=open;endSize=8;strokeColor=#ff0000;rounded=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" edge="1" parent="1" source="hl4_y-9aQjZpBxU0-aQC-3" target="K95-BbwWhIkPTgnNecL5-14">
          <mxGeometry x="0.5" y="10" relative="1" as="geometry">
            <mxPoint x="530" y="290" as="targetPoint" />
            <mxPoint as="offset" />
            <mxPoint x="530" y="250" as="sourcePoint" />
          </mxGeometry>
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
  <diagram id="pZYrAzTK1UeTh1Kocj9c" name="shutdownEngine">
    <mxGraphModel dx="1434" dy="750" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="SPgW22imB_aMXdX3KjFQ-1" value="" style="ellipse;html=1;shape=startState;fillColor=#000000;strokeColor=#ff0000;" parent="1" vertex="1">
          <mxGeometry x="384" y="330" width="30" height="30" as="geometry" />
        </mxCell>
        <mxCell id="SPgW22imB_aMXdX3KjFQ-2" value="" style="edgeStyle=orthogonalEdgeStyle;html=1;verticalAlign=bottom;endArrow=open;endSize=8;strokeColor=#ff0000;rounded=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="SPgW22imB_aMXdX3KjFQ-1" target="K_hrniBdppyfFCluPing-1" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="415" y="430" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="SPgW22imB_aMXdX3KjFQ-3" value="Start - Inputs: Skip connection close" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontStyle=1" parent="1" vertex="1">
          <mxGeometry x="414" y="330" width="230" height="30" as="geometry" />
        </mxCell>
        <mxCell id="SPgW22imB_aMXdX3KjFQ-4" value="OnClose" style="rounded=1;whiteSpace=wrap;html=1;arcSize=40;fillColor=#d5e8d4;strokeColor=#82b366;" parent="1" vertex="1">
          <mxGeometry x="339" y="480" width="120" height="40" as="geometry" />
        </mxCell>
        <mxCell id="SPgW22imB_aMXdX3KjFQ-5" value="" style="edgeStyle=orthogonalEdgeStyle;html=1;verticalAlign=bottom;endArrow=open;endSize=8;strokeColor=#ff0000;rounded=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="SPgW22imB_aMXdX3KjFQ-4" target="NNvM1iQHFz3LcmQJ8o8U-1" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="399" y="560" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="NNvM1iQHFz3LcmQJ8o8U-1" value="Skip?" style="rhombus;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;fontColor=#333333;" parent="1" vertex="1">
          <mxGeometry x="359" y="560" width="80" height="40" as="geometry" />
        </mxCell>
        <mxCell id="NNvM1iQHFz3LcmQJ8o8U-2" value="no" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;verticalAlign=bottom;endArrow=open;endSize=8;strokeColor=#ff0000;rounded=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="NNvM1iQHFz3LcmQJ8o8U-1" target="NNvM1iQHFz3LcmQJ8o8U-4" edge="1">
          <mxGeometry x="-0.978" y="10" relative="1" as="geometry">
            <mxPoint x="871" y="850" as="targetPoint" />
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="NNvM1iQHFz3LcmQJ8o8U-3" value="yes" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;verticalAlign=top;endArrow=open;endSize=8;strokeColor=#ff0000;rounded=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="NNvM1iQHFz3LcmQJ8o8U-1" target="vix3jnbECJdlBKXVR5PN-1" edge="1">
          <mxGeometry x="-0.8997" y="-30" relative="1" as="geometry">
            <mxPoint x="681" y="930" as="targetPoint" />
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="NNvM1iQHFz3LcmQJ8o8U-4" value="Close websocket connection" style="rounded=1;whiteSpace=wrap;html=1;arcSize=40;fillColor=#d5e8d4;strokeColor=#82b366;" parent="1" vertex="1">
          <mxGeometry x="450" y="600" width="120" height="40" as="geometry" />
        </mxCell>
        <mxCell id="NNvM1iQHFz3LcmQJ8o8U-5" value="" style="edgeStyle=orthogonalEdgeStyle;html=1;verticalAlign=bottom;endArrow=open;endSize=8;strokeColor=#ff0000;rounded=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="NNvM1iQHFz3LcmQJ8o8U-4" target="K_hrniBdppyfFCluPing-6" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="821" y="990" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="jJOIedbqylg7KsQvb2Ds-1" value="&lt;b&gt;&lt;font style=&quot;font-size: 18px;&quot;&gt;Websocket engine : background shutdown&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="150" y="270" width="390" height="40" as="geometry" />
        </mxCell>
        <mxCell id="K_hrniBdppyfFCluPing-1" value="Create shutdown ctx. from engine ctx." style="rounded=1;whiteSpace=wrap;html=1;arcSize=40;fillColor=#d5e8d4;strokeColor=#82b366;" parent="1" vertex="1">
          <mxGeometry x="339" y="400" width="120" height="40" as="geometry" />
        </mxCell>
        <mxCell id="K_hrniBdppyfFCluPing-2" value="" style="edgeStyle=orthogonalEdgeStyle;html=1;verticalAlign=bottom;endArrow=open;endSize=8;strokeColor=#ff0000;rounded=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="K_hrniBdppyfFCluPing-1" target="SPgW22imB_aMXdX3KjFQ-4" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="130" y="670" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="K_hrniBdppyfFCluPing-6" value="Error?" style="rhombus;whiteSpace=wrap;html=1;fontColor=#333333;fillColor=#f5f5f5;strokeColor=#666666;" parent="1" vertex="1">
          <mxGeometry x="470" y="680" width="80" height="40" as="geometry" />
        </mxCell>
        <mxCell id="K_hrniBdppyfFCluPing-7" value="no" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;verticalAlign=bottom;endArrow=open;endSize=8;strokeColor=#ff0000;rounded=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="K_hrniBdppyfFCluPing-6" target="vix3jnbECJdlBKXVR5PN-1" edge="1">
          <mxGeometry x="-0.8919" y="-10" relative="1" as="geometry">
            <mxPoint x="459" y="800" as="targetPoint" />
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="K_hrniBdppyfFCluPing-8" value="yes" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;verticalAlign=top;endArrow=open;endSize=8;strokeColor=#ff0000;rounded=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="K_hrniBdppyfFCluPing-6" target="OfIvFIhuIxmPAw8JaxGz-1" edge="1">
          <mxGeometry x="-1" y="30" relative="1" as="geometry">
            <mxPoint x="710" y="910" as="targetPoint" />
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="OfIvFIhuIxmPAw8JaxGz-1" value="Call OnCloseError" style="rounded=1;whiteSpace=wrap;html=1;arcSize=40;fillColor=#f8cecc;strokeColor=#b85450;" parent="1" vertex="1">
          <mxGeometry x="570" y="730" width="120" height="40" as="geometry" />
        </mxCell>
        <mxCell id="OfIvFIhuIxmPAw8JaxGz-2" value="" style="edgeStyle=orthogonalEdgeStyle;html=1;verticalAlign=bottom;endArrow=open;endSize=8;strokeColor=#ff0000;rounded=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="OfIvFIhuIxmPAw8JaxGz-1" target="vix3jnbECJdlBKXVR5PN-1" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="459" y="800" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="jdbeSVTrzZ8BZ8w5A641-1" value="The engine will stop" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#f5f5f5;fontColor=#333333;strokeColor=#666666;" parent="1" vertex="1">
          <mxGeometry x="459" y="797.5" width="141" height="25" as="geometry" />
        </mxCell>
        <mxCell id="k7FnFyYyJSa4fIyN-0ZA-1" value="" style="endArrow=none;dashed=1;html=1;dashPattern=1 3;strokeWidth=2;rounded=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" target="jdbeSVTrzZ8BZ8w5A641-1" edge="1" source="1La0aNV2YAEZxayT0HJc-1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="470" y="884.5" as="sourcePoint" />
            <mxPoint x="440" y="554.5" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="vix3jnbECJdlBKXVR5PN-1" value="Restart?" style="rhombus;whiteSpace=wrap;html=1;fontColor=#333333;fillColor=#f5f5f5;strokeColor=#666666;" vertex="1" parent="1">
          <mxGeometry x="120" y="790" width="80" height="40" as="geometry" />
        </mxCell>
        <mxCell id="vix3jnbECJdlBKXVR5PN-2" value="no" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;verticalAlign=bottom;endArrow=open;endSize=8;strokeColor=#ff0000;rounded=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" source="vix3jnbECJdlBKXVR5PN-1" parent="1" target="1La0aNV2YAEZxayT0HJc-2">
          <mxGeometry x="-1" relative="1" as="geometry">
            <mxPoint x="330" y="1030" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="vix3jnbECJdlBKXVR5PN-3" value="yes" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;verticalAlign=top;endArrow=open;endSize=8;strokeColor=#ff0000;rounded=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" source="vix3jnbECJdlBKXVR5PN-1" parent="1" target="1La0aNV2YAEZxayT0HJc-5">
          <mxGeometry x="-1" relative="1" as="geometry">
            <mxPoint x="190" y="1110" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="1La0aNV2YAEZxayT0HJc-1" value="" style="ellipse;html=1;shape=endState;fillColor=#000000;strokeColor=#ff0000;" vertex="1" parent="1">
          <mxGeometry x="398.5" y="795" width="30" height="30" as="geometry" />
        </mxCell>
        <mxCell id="1La0aNV2YAEZxayT0HJc-2" value="Stop channel &amp;lt;- true" style="rounded=1;whiteSpace=wrap;html=1;arcSize=40;fillColor=#d5e8d4;strokeColor=#82b366;" vertex="1" parent="1">
          <mxGeometry x="239" y="790" width="120" height="40" as="geometry" />
        </mxCell>
        <mxCell id="1La0aNV2YAEZxayT0HJc-3" value="" style="edgeStyle=orthogonalEdgeStyle;html=1;verticalAlign=bottom;endArrow=open;endSize=8;strokeColor=#ff0000;rounded=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" source="1La0aNV2YAEZxayT0HJc-2" parent="1" target="1La0aNV2YAEZxayT0HJc-1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="620" y="1135" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="1La0aNV2YAEZxayT0HJc-5" value="Check engine context" style="rounded=1;whiteSpace=wrap;html=1;arcSize=40;fillColor=#d5e8d4;strokeColor=#82b366;" vertex="1" parent="1">
          <mxGeometry x="100" y="870" width="120" height="40" as="geometry" />
        </mxCell>
        <mxCell id="1La0aNV2YAEZxayT0HJc-6" value="" style="edgeStyle=orthogonalEdgeStyle;html=1;verticalAlign=bottom;endArrow=open;endSize=8;strokeColor=#ff0000;rounded=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" source="1La0aNV2YAEZxayT0HJc-5" parent="1" target="1La0aNV2YAEZxayT0HJc-7">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="70" y="1010" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="1La0aNV2YAEZxayT0HJc-7" value="Done?" style="rhombus;whiteSpace=wrap;html=1;fontColor=#333333;fillColor=#f5f5f5;strokeColor=#666666;" vertex="1" parent="1">
          <mxGeometry x="120" y="950" width="80" height="40" as="geometry" />
        </mxCell>
        <mxCell id="1La0aNV2YAEZxayT0HJc-8" value="no" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;verticalAlign=bottom;endArrow=open;endSize=8;strokeColor=#ff0000;rounded=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" source="1La0aNV2YAEZxayT0HJc-7" parent="1" target="1La0aNV2YAEZxayT0HJc-10">
          <mxGeometry x="-1" relative="1" as="geometry">
            <mxPoint x="180" y="1140" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="1La0aNV2YAEZxayT0HJc-9" value="yes" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;verticalAlign=top;endArrow=open;endSize=8;strokeColor=#ff0000;rounded=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" source="1La0aNV2YAEZxayT0HJc-7" parent="1" target="1La0aNV2YAEZxayT0HJc-13">
          <mxGeometry x="-1" relative="1" as="geometry">
            <mxPoint x="40" y="1220" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="1La0aNV2YAEZxayT0HJc-10" value="Create goroutine&lt;br&gt;Call restartEngine" style="rounded=1;whiteSpace=wrap;html=1;arcSize=40;fillColor=#d5e8d4;strokeColor=#82b366;" vertex="1" parent="1">
          <mxGeometry x="239" y="950" width="120" height="40" as="geometry" />
        </mxCell>
        <mxCell id="1La0aNV2YAEZxayT0HJc-11" value="" style="edgeStyle=orthogonalEdgeStyle;html=1;verticalAlign=bottom;endArrow=open;endSize=8;strokeColor=#ff0000;rounded=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" source="1La0aNV2YAEZxayT0HJc-10" parent="1" target="1La0aNV2YAEZxayT0HJc-12">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="299" y="1269" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="1La0aNV2YAEZxayT0HJc-12" value="" style="ellipse;html=1;shape=endState;fillColor=#000000;strokeColor=#ff0000;" vertex="1" parent="1">
          <mxGeometry x="398.5" y="955" width="30" height="30" as="geometry" />
        </mxCell>
        <mxCell id="1La0aNV2YAEZxayT0HJc-13" value="Stop channel &amp;lt;- true" style="rounded=1;whiteSpace=wrap;html=1;arcSize=40;fillColor=#d5e8d4;strokeColor=#82b366;" vertex="1" parent="1">
          <mxGeometry x="100" y="1040" width="120" height="40" as="geometry" />
        </mxCell>
        <mxCell id="1La0aNV2YAEZxayT0HJc-14" value="" style="ellipse;html=1;shape=endState;fillColor=#000000;strokeColor=#ff0000;" vertex="1" parent="1">
          <mxGeometry x="145" y="1114" width="30" height="30" as="geometry" />
        </mxCell>
        <mxCell id="1La0aNV2YAEZxayT0HJc-15" value="" style="edgeStyle=orthogonalEdgeStyle;html=1;verticalAlign=bottom;endArrow=open;endSize=8;strokeColor=#ff0000;rounded=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" edge="1" parent="1" source="1La0aNV2YAEZxayT0HJc-13" target="1La0aNV2YAEZxayT0HJc-14">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="-100" y="1312.5" as="targetPoint" />
            <mxPoint x="21" y="1297.5" as="sourcePoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="1La0aNV2YAEZxayT0HJc-16" value="The engine will restart" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#f5f5f5;fontColor=#333333;strokeColor=#666666;" vertex="1" parent="1">
          <mxGeometry x="458.5" y="957.5" width="141" height="25" as="geometry" />
        </mxCell>
        <mxCell id="1La0aNV2YAEZxayT0HJc-18" value="The engine will stop" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#f5f5f5;fontColor=#333333;strokeColor=#666666;" vertex="1" parent="1">
          <mxGeometry x="200" y="1116.5" width="141" height="25" as="geometry" />
        </mxCell>
        <mxCell id="1La0aNV2YAEZxayT0HJc-19" value="" style="endArrow=none;dashed=1;html=1;dashPattern=1 3;strokeWidth=2;rounded=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" edge="1" parent="1" source="1La0aNV2YAEZxayT0HJc-12" target="1La0aNV2YAEZxayT0HJc-16">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="240" y="1010" as="sourcePoint" />
            <mxPoint x="290" y="960" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="1La0aNV2YAEZxayT0HJc-20" value="" style="endArrow=none;dashed=1;html=1;dashPattern=1 3;strokeWidth=2;rounded=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="1La0aNV2YAEZxayT0HJc-14" target="1La0aNV2YAEZxayT0HJc-18">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="240" y="1010" as="sourcePoint" />
            <mxPoint x="290" y="960" as="targetPoint" />
          </mxGeometry>
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
  <diagram id="1htNDXy82lo2dXjL-2-t" name="restartEngine">
    <mxGraphModel dx="1434" dy="750" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="SvGO6OIYzLHNrrH4k3ZZ-1" value="" style="ellipse;html=1;shape=startState;fillColor=#000000;strokeColor=#ff0000;" parent="1" vertex="1">
          <mxGeometry x="305" y="260" width="30" height="30" as="geometry" />
        </mxCell>
        <mxCell id="SvGO6OIYzLHNrrH4k3ZZ-2" value="" style="edgeStyle=orthogonalEdgeStyle;html=1;verticalAlign=bottom;endArrow=open;endSize=8;strokeColor=#ff0000;rounded=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="SvGO6OIYzLHNrrH4k3ZZ-1" target="WvrTY-IHVKfqmWQdIbq3-1" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="175" y="310" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="SvGO6OIYzLHNrrH4k3ZZ-5" value="Check restart context" style="rounded=1;whiteSpace=wrap;html=1;arcSize=40;fillColor=#d5e8d4;strokeColor=#82b366;" parent="1" vertex="1">
          <mxGeometry x="260" y="400" width="120" height="40" as="geometry" />
        </mxCell>
        <mxCell id="SvGO6OIYzLHNrrH4k3ZZ-6" value="" style="edgeStyle=orthogonalEdgeStyle;html=1;verticalAlign=bottom;endArrow=open;endSize=8;strokeColor=#ff0000;rounded=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="SvGO6OIYzLHNrrH4k3ZZ-5" target="SvGO6OIYzLHNrrH4k3ZZ-7" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="370" y="835" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="SvGO6OIYzLHNrrH4k3ZZ-7" value="Done?" style="rhombus;whiteSpace=wrap;html=1;fontColor=#333333;fillColor=#f5f5f5;strokeColor=#666666;" parent="1" vertex="1">
          <mxGeometry x="280" y="480" width="80" height="40" as="geometry" />
        </mxCell>
        <mxCell id="SvGO6OIYzLHNrrH4k3ZZ-8" value="no" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;verticalAlign=bottom;endArrow=open;endSize=8;strokeColor=#ff0000;rounded=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="SvGO6OIYzLHNrrH4k3ZZ-7" target="rs5_jnafFNggfDI-Oq6k-27" edge="1">
          <mxGeometry y="-30" relative="1" as="geometry">
            <mxPoint x="320" y="560" as="targetPoint" />
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="SvGO6OIYzLHNrrH4k3ZZ-9" value="yes" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;verticalAlign=top;endArrow=open;endSize=8;strokeColor=#ff0000;rounded=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="SvGO6OIYzLHNrrH4k3ZZ-7" target="xE8ypaBdCVbLFUIp78z_-1" edge="1">
          <mxGeometry x="-1" y="30" relative="1" as="geometry">
            <mxPoint x="400" y="750" as="targetPoint" />
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="SvGO6OIYzLHNrrH4k3ZZ-14" value="" style="ellipse;html=1;shape=endState;fillColor=#000000;strokeColor=#ff0000;" parent="1" vertex="1">
          <mxGeometry x="560" y="485" width="30" height="30" as="geometry" />
        </mxCell>
        <mxCell id="rggn1Ij9qoxtfvErX976-1" value="Create goroutine&lt;br&gt;Call startEngine(true)" style="rounded=1;whiteSpace=wrap;html=1;arcSize=40;fillColor=#d5e8d4;strokeColor=#82b366;" parent="1" vertex="1">
          <mxGeometry x="260" y="640" width="120" height="40" as="geometry" />
        </mxCell>
        <mxCell id="rggn1Ij9qoxtfvErX976-2" value="" style="edgeStyle=orthogonalEdgeStyle;html=1;verticalAlign=bottom;endArrow=open;endSize=8;strokeColor=#ff0000;rounded=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="rggn1Ij9qoxtfvErX976-1" target="rs5_jnafFNggfDI-Oq6k-2" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="500" y="1060" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="6QMG8joLP9l_RzSzjmK9-1" value="&lt;b&gt;&lt;font style=&quot;font-size: 18px;&quot;&gt;Websocket container : background restart&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="150" y="210" width="380" height="40" as="geometry" />
        </mxCell>
        <mxCell id="YNMN09FJ4pE0HjwpG5BJ-2" value="The engine will stop" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#f5f5f5;fontColor=#333333;strokeColor=#666666;" parent="1" vertex="1">
          <mxGeometry x="630" y="487.5" width="160" height="25" as="geometry" />
        </mxCell>
        <mxCell id="YNMN09FJ4pE0HjwpG5BJ-5" value="" style="endArrow=none;dashed=1;html=1;dashPattern=1 3;strokeWidth=2;rounded=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" parent="1" source="SvGO6OIYzLHNrrH4k3ZZ-14" target="YNMN09FJ4pE0HjwpG5BJ-2" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="350" y="580" as="sourcePoint" />
            <mxPoint x="400" y="530" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="WvrTY-IHVKfqmWQdIbq3-1" value="Loop" style="rounded=1;whiteSpace=wrap;html=1;arcSize=40;fillColor=#f5f5f5;strokeColor=#666666;fontColor=#333333;" parent="1" vertex="1">
          <mxGeometry x="260" y="320" width="120" height="40" as="geometry" />
        </mxCell>
        <mxCell id="WvrTY-IHVKfqmWQdIbq3-2" value="" style="edgeStyle=orthogonalEdgeStyle;html=1;verticalAlign=bottom;endArrow=open;endSize=8;strokeColor=#ff0000;rounded=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="WvrTY-IHVKfqmWQdIbq3-1" target="SvGO6OIYzLHNrrH4k3ZZ-5" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="540" y="380" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="xE8ypaBdCVbLFUIp78z_-1" value="Stop channel &amp;lt;- true" style="rounded=1;whiteSpace=wrap;html=1;arcSize=40;fillColor=#f8cecc;strokeColor=#b85450;" vertex="1" parent="1">
          <mxGeometry x="400" y="480" width="120" height="40" as="geometry" />
        </mxCell>
        <mxCell id="xE8ypaBdCVbLFUIp78z_-2" value="" style="edgeStyle=orthogonalEdgeStyle;html=1;verticalAlign=bottom;endArrow=open;endSize=8;strokeColor=#ff0000;rounded=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" source="xE8ypaBdCVbLFUIp78z_-1" parent="1" target="SvGO6OIYzLHNrrH4k3ZZ-14">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="560" y="500" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="rs5_jnafFNggfDI-Oq6k-1" value="" style="ellipse;html=1;shape=endState;fillColor=#000000;strokeColor=#ff0000;" vertex="1" parent="1">
          <mxGeometry x="399" y="802" width="30" height="30" as="geometry" />
        </mxCell>
        <mxCell id="rs5_jnafFNggfDI-Oq6k-2" value="Wait on channels: startup, ctx.Done" style="rounded=1;whiteSpace=wrap;html=1;arcSize=40;fillColor=#fff2cc;strokeColor=#d6b656;" vertex="1" parent="1">
          <mxGeometry x="215" y="722" width="210" height="40" as="geometry" />
        </mxCell>
        <mxCell id="rs5_jnafFNggfDI-Oq6k-6" value="Done or error?" style="rhombus;whiteSpace=wrap;html=1;fontColor=#333333;fillColor=#f5f5f5;strokeColor=#666666;" vertex="1" parent="1">
          <mxGeometry x="280" y="797" width="80" height="40" as="geometry" />
        </mxCell>
        <mxCell id="rs5_jnafFNggfDI-Oq6k-7" value="" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;verticalAlign=top;endArrow=open;endSize=8;strokeColor=#ff0000;rounded=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="rs5_jnafFNggfDI-Oq6k-6" target="rs5_jnafFNggfDI-Oq6k-10">
          <mxGeometry x="-1" relative="1" as="geometry">
            <mxPoint x="560" y="862" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="rs5_jnafFNggfDI-Oq6k-8" value="" style="edgeStyle=orthogonalEdgeStyle;html=1;verticalAlign=bottom;endArrow=open;endSize=8;strokeColor=#ff0000;rounded=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="rs5_jnafFNggfDI-Oq6k-2" target="rs5_jnafFNggfDI-Oq6k-6">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="465" y="872" as="targetPoint" />
            <mxPoint x="435" y="762" as="sourcePoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="rs5_jnafFNggfDI-Oq6k-10" value="Call OnRestartError" style="rounded=1;whiteSpace=wrap;html=1;arcSize=40;fillColor=#f8cecc;strokeColor=#b85450;" vertex="1" parent="1">
          <mxGeometry x="260" y="880" width="120" height="40" as="geometry" />
        </mxCell>
        <mxCell id="rs5_jnafFNggfDI-Oq6k-11" value="" style="edgeStyle=orthogonalEdgeStyle;html=1;verticalAlign=bottom;endArrow=open;endSize=8;strokeColor=#ff0000;rounded=0;exitX=0;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="rs5_jnafFNggfDI-Oq6k-10" target="WvrTY-IHVKfqmWQdIbq3-1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="40" y="920" as="targetPoint" />
            <mxPoint x="745" y="652" as="sourcePoint" />
            <Array as="points">
              <mxPoint x="200" y="900" />
              <mxPoint x="200" y="340" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="rs5_jnafFNggfDI-Oq6k-19" value="" style="edgeStyle=orthogonalEdgeStyle;html=1;verticalAlign=bottom;endArrow=open;endSize=8;strokeColor=#ff0000;rounded=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="rs5_jnafFNggfDI-Oq6k-6" target="rs5_jnafFNggfDI-Oq6k-1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="845" y="1022" as="targetPoint" />
            <mxPoint x="730" y="912" as="sourcePoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="rs5_jnafFNggfDI-Oq6k-24" value="no" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="350" y="780" width="40" height="30" as="geometry" />
        </mxCell>
        <mxCell id="rs5_jnafFNggfDI-Oq6k-25" value="The engine has restarted" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#f5f5f5;fontColor=#333333;strokeColor=#666666;" vertex="1" parent="1">
          <mxGeometry x="465" y="804.5" width="160" height="25" as="geometry" />
        </mxCell>
        <mxCell id="rs5_jnafFNggfDI-Oq6k-26" value="" style="endArrow=none;dashed=1;html=1;dashPattern=1 3;strokeWidth=2;rounded=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" edge="1" parent="1" source="rs5_jnafFNggfDI-Oq6k-1" target="rs5_jnafFNggfDI-Oq6k-25">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="200" y="880" as="sourcePoint" />
            <mxPoint x="250" y="830" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="rs5_jnafFNggfDI-Oq6k-27" value="Sleep if retry&lt;br&gt;Exponential delay" style="rounded=1;whiteSpace=wrap;html=1;arcSize=40;fillColor=#d5e8d4;strokeColor=#82b366;" vertex="1" parent="1">
          <mxGeometry x="260" y="560" width="120" height="40" as="geometry" />
        </mxCell>
        <mxCell id="rs5_jnafFNggfDI-Oq6k-28" value="" style="edgeStyle=orthogonalEdgeStyle;html=1;verticalAlign=bottom;endArrow=open;endSize=8;strokeColor=#ff0000;rounded=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="rs5_jnafFNggfDI-Oq6k-27" target="rggn1Ij9qoxtfvErX976-1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="540" y="460" as="targetPoint" />
            <mxPoint x="330" y="370" as="sourcePoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="rs5_jnafFNggfDI-Oq6k-29" value="yes" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="280" y="837" width="40" height="30" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
  <diagram id="mpbtN4u07oqs6mSuEGCE" name="Stop">
    <mxGraphModel dx="1434" dy="750" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="0Xe5-VyDIaPrD1lMDZWf-1" value="" style="ellipse;html=1;shape=startState;fillColor=#000000;strokeColor=#ff0000;fontSize=12;" parent="1" vertex="1">
          <mxGeometry x="290" y="130" width="30" height="30" as="geometry" />
        </mxCell>
        <mxCell id="0Xe5-VyDIaPrD1lMDZWf-2" value="" style="edgeStyle=orthogonalEdgeStyle;html=1;verticalAlign=bottom;endArrow=open;endSize=8;strokeColor=#ff0000;rounded=0;fontSize=12;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="0Xe5-VyDIaPrD1lMDZWf-1" target="l-nf1bHAsrPmvdHPm3Md-4" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="305" y="200" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="0Xe5-VyDIaPrD1lMDZWf-19" value="" style="ellipse;html=1;shape=endState;fillColor=#000000;strokeColor=#ff0000;fontSize=12;" parent="1" vertex="1">
          <mxGeometry x="290" y="680" width="30" height="30" as="geometry" />
        </mxCell>
        <mxCell id="yf2ZP45rcoejkoe42wSx-1" value="Cancel engine context" style="rounded=1;whiteSpace=wrap;html=1;arcSize=40;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=12;" parent="1" vertex="1">
          <mxGeometry x="245" y="360" width="120" height="40" as="geometry" />
        </mxCell>
        <mxCell id="yf2ZP45rcoejkoe42wSx-2" value="" style="edgeStyle=orthogonalEdgeStyle;html=1;verticalAlign=bottom;endArrow=open;endSize=8;strokeColor=#ff0000;rounded=0;fontSize=12;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="yf2ZP45rcoejkoe42wSx-1" target="O-AuQDGHTUDWMlbTWPKo-1" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="400" y="445" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="yf2ZP45rcoejkoe42wSx-3" value="Cancelling the engine context will cancel all inherited contexts, including session context. &lt;br&gt;&lt;br&gt;Engine goroutines will call OnClose callback, shutdown resources, init restart phase and exit.&lt;br&gt;&lt;br&gt;Restart phase will do nothing because context is done. This will end the engine shutdown.&lt;br&gt;&lt;br&gt;It will not be possible to restart the engine as the engine context will be Done." style="rounded=0;whiteSpace=wrap;html=1;fontSize=12;align=left;fillColor=#f5f5f5;fontColor=#333333;strokeColor=#666666;" parent="1" vertex="1">
          <mxGeometry x="460" y="340" width="260" height="180" as="geometry" />
        </mxCell>
        <mxCell id="yf2ZP45rcoejkoe42wSx-4" value="" style="endArrow=none;dashed=1;html=1;dashPattern=1 3;strokeWidth=2;rounded=0;fontSize=12;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="yf2ZP45rcoejkoe42wSx-1" target="yf2ZP45rcoejkoe42wSx-3" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="390" y="300" as="sourcePoint" />
            <mxPoint x="440" y="250" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="l-nf1bHAsrPmvdHPm3Md-1" value="Started?" style="rhombus;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;fontSize=12;fontColor=#333333;" parent="1" vertex="1">
          <mxGeometry x="265" y="280" width="80" height="40" as="geometry" />
        </mxCell>
        <mxCell id="l-nf1bHAsrPmvdHPm3Md-2" value="no" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;verticalAlign=bottom;endArrow=open;endSize=8;strokeColor=#ff0000;rounded=0;fontSize=12;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="l-nf1bHAsrPmvdHPm3Md-1" target="l-nf1bHAsrPmvdHPm3Md-8" edge="1">
          <mxGeometry x="-0.6842" y="10" relative="1" as="geometry">
            <mxPoint x="560" y="450" as="targetPoint" />
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="l-nf1bHAsrPmvdHPm3Md-3" value="yes" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;verticalAlign=top;endArrow=open;endSize=8;strokeColor=#ff0000;rounded=0;fontSize=12;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="l-nf1bHAsrPmvdHPm3Md-1" target="yf2ZP45rcoejkoe42wSx-1" edge="1">
          <mxGeometry x="-1" y="-35" relative="1" as="geometry">
            <mxPoint x="220" y="470" as="targetPoint" />
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="l-nf1bHAsrPmvdHPm3Md-4" value="Lock start mutex" style="rounded=1;whiteSpace=wrap;html=1;arcSize=40;fillColor=#e1d5e7;strokeColor=#9673a6;fontSize=12;" parent="1" vertex="1">
          <mxGeometry x="245" y="200" width="120" height="40" as="geometry" />
        </mxCell>
        <mxCell id="l-nf1bHAsrPmvdHPm3Md-5" value="" style="edgeStyle=orthogonalEdgeStyle;html=1;verticalAlign=bottom;endArrow=open;endSize=8;strokeColor=#ff0000;rounded=0;fontSize=12;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="l-nf1bHAsrPmvdHPm3Md-4" target="l-nf1bHAsrPmvdHPm3Md-1" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="50" y="300" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="l-nf1bHAsrPmvdHPm3Md-6" value="Unlock start mutex" style="rounded=1;whiteSpace=wrap;html=1;arcSize=40;fillColor=#e1d5e7;strokeColor=#9673a6;fontSize=12;" parent="1" vertex="1">
          <mxGeometry x="245" y="600" width="120" height="40" as="geometry" />
        </mxCell>
        <mxCell id="l-nf1bHAsrPmvdHPm3Md-7" value="" style="edgeStyle=orthogonalEdgeStyle;html=1;verticalAlign=bottom;endArrow=open;endSize=8;strokeColor=#ff0000;rounded=0;fontSize=12;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="l-nf1bHAsrPmvdHPm3Md-6" target="0Xe5-VyDIaPrD1lMDZWf-19" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="620" y="860" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="l-nf1bHAsrPmvdHPm3Md-8" value="Error: not started" style="rounded=1;whiteSpace=wrap;html=1;arcSize=40;fillColor=#f8cecc;strokeColor=#b85450;fontSize=12;" parent="1" vertex="1">
          <mxGeometry x="440" y="280" width="120" height="40" as="geometry" />
        </mxCell>
        <mxCell id="l-nf1bHAsrPmvdHPm3Md-9" value="" style="edgeStyle=orthogonalEdgeStyle;html=1;verticalAlign=bottom;endArrow=open;endSize=8;strokeColor=#ff0000;rounded=0;fontSize=12;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="l-nf1bHAsrPmvdHPm3Md-8" target="l-nf1bHAsrPmvdHPm3Md-10" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="680" y="380" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="l-nf1bHAsrPmvdHPm3Md-10" value="" style="ellipse;html=1;shape=endState;fillColor=#000000;strokeColor=#ff0000;fontSize=12;" parent="1" vertex="1">
          <mxGeometry x="630" y="285" width="30" height="30" as="geometry" />
        </mxCell>
        <mxCell id="l-nf1bHAsrPmvdHPm3Md-12" value="Exit" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=12;" parent="1" vertex="1">
          <mxGeometry x="670" y="285" width="40" height="30" as="geometry" />
        </mxCell>
        <mxCell id="1vdqJ313xZPRHfILq2EP-1" value="Set started = false" style="rounded=1;whiteSpace=wrap;html=1;arcSize=40;fillColor=#d5e8d4;strokeColor=#82b366;" parent="1" vertex="1">
          <mxGeometry x="245" y="520" width="120" height="40" as="geometry" />
        </mxCell>
        <mxCell id="1vdqJ313xZPRHfILq2EP-2" value="" style="edgeStyle=orthogonalEdgeStyle;html=1;verticalAlign=bottom;endArrow=open;endSize=8;strokeColor=#ff0000;rounded=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="1vdqJ313xZPRHfILq2EP-1" target="l-nf1bHAsrPmvdHPm3Md-6" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="510" y="760" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="zsR90Emmh8l-q7i7eVQg-1" value="&lt;span style=&quot;font-size: 18px;&quot;&gt;&lt;b&gt;Websocket container: User stop&lt;/b&gt;&lt;/span&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="340" y="125" width="300" height="40" as="geometry" />
        </mxCell>
        <mxCell id="O-AuQDGHTUDWMlbTWPKo-1" value="Wait on stopped channel or timeout" style="rounded=1;whiteSpace=wrap;html=1;arcSize=40;fillColor=#d5e8d4;strokeColor=#82b366;" parent="1" vertex="1">
          <mxGeometry x="245" y="440" width="120" height="40" as="geometry" />
        </mxCell>
        <mxCell id="O-AuQDGHTUDWMlbTWPKo-2" value="" style="edgeStyle=orthogonalEdgeStyle;html=1;verticalAlign=bottom;endArrow=open;endSize=8;strokeColor=#ff0000;rounded=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="O-AuQDGHTUDWMlbTWPKo-1" target="1vdqJ313xZPRHfILq2EP-1" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="590" y="690" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="O-AuQDGHTUDWMlbTWPKo-3" value="This ensures Stop is synchronous and completes once onShutdown has written a value on stopped channel. &lt;br&gt;&lt;br&gt;This will happen once when onShutdown notice the engine context is Done() or auto-reconnect is not enabled." style="rounded=0;whiteSpace=wrap;html=1;fontSize=12;align=left;fillColor=#f5f5f5;fontColor=#333333;strokeColor=#666666;" parent="1" vertex="1">
          <mxGeometry x="460" y="550" width="260" height="130" as="geometry" />
        </mxCell>
        <mxCell id="f-jyj9SC9SskK_KMusvk-1" value="" style="endArrow=none;dashed=1;html=1;dashPattern=1 3;strokeWidth=2;rounded=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="O-AuQDGHTUDWMlbTWPKo-1" target="O-AuQDGHTUDWMlbTWPKo-3" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="390" y="460" as="sourcePoint" />
            <mxPoint x="440" y="410" as="targetPoint" />
          </mxGeometry>
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
